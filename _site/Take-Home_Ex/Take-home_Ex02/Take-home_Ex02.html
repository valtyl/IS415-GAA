<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Valencia">
<meta name="dcterms.date" content="2023-02-13">

<title>IS415-GAA - Take-home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.0/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">IS415-GAA</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html">
 <span class="dropdown-text">Hands-on Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex04/Hands-on_Ex04.html">
 <span class="dropdown-text">Hands-on Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05.html">
 <span class="dropdown-text">Hands-on Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html">
 <span class="dropdown-text">Hands-on Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex07/Hands-on_Ex07.html">
 <span class="dropdown-text">Hands-on Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex08/Hands-on_Ex08.html">
 <span class="dropdown-text">Hands-on Exercise 8</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-class Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex02/In-class_Ex02.html">
 <span class="dropdown-text">In-class Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex03/In-class_Ex03.html">
 <span class="dropdown-text">In-class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex04/In-class_Ex04.html">
 <span class="dropdown-text">In-class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex05/In-class_Ex05.html">
 <span class="dropdown-text">In-class Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex06/In-class_Ex06.html">
 <span class="dropdown-text">In-class Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex07/In-class_Ex07.html">
 <span class="dropdown-text">In-class Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex08/In-class_Ex08.html">
 <span class="dropdown-text">In-class Exercise 8</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex09/In-class_Ex09.html">
 <span class="dropdown-text">In-class Exercise 9</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex10/In-class_Ex10.html">
 <span class="dropdown-text">In-class Exercise 10</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-home Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html">
 <span class="dropdown-text">Take-home Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html">
 <span class="dropdown-text">Take-home Exercise 3</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setting-the-scene" id="toc-setting-the-scene" class="nav-link active" data-scroll-target="#setting-the-scene">1 Setting the Scene</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">2 Objectives</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">3 The Data</a>
  <ul class="collapse">
  <li><a href="#aspatial-data" id="toc-aspatial-data" class="nav-link" data-scroll-target="#aspatial-data">3.1 Aspatial Data</a></li>
  <li><a href="#geospatial-data" id="toc-geospatial-data" class="nav-link" data-scroll-target="#geospatial-data">3.2 Geospatial Data</a></li>
  </ul></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">4 Getting Started</a>
  <ul class="collapse">
  <li><a href="#installing-and-loading-r-packages" id="toc-installing-and-loading-r-packages" class="nav-link" data-scroll-target="#installing-and-loading-r-packages">4.1 Installing and Loading R packages</a></li>
  <li><a href="#data-wrangling-geospatial-data" id="toc-data-wrangling-geospatial-data" class="nav-link" data-scroll-target="#data-wrangling-geospatial-data">4.2 Data Wrangling: Geospatial Data</a>
  <ul class="collapse">
  <li><a href="#importing-the-geospatial-data" id="toc-importing-the-geospatial-data" class="nav-link" data-scroll-target="#importing-the-geospatial-data">4.2.1 Importing the Geospatial Data</a></li>
  <li><a href="#data-pre-processing" id="toc-data-pre-processing" class="nav-link" data-scroll-target="#data-pre-processing">4.2.2 Data Pre-Processing</a></li>
  <li><a href="#data-visualisation" id="toc-data-visualisation" class="nav-link" data-scroll-target="#data-visualisation">4.2.3 Data Visualisation</a></li>
  <li><a href="#retaining-relavant-columns-only" id="toc-retaining-relavant-columns-only" class="nav-link" data-scroll-target="#retaining-relavant-columns-only">4.2.4 Retaining relavant columns only</a></li>
  <li><a href="#renaming-the-columns-in-english" id="toc-renaming-the-columns-in-english" class="nav-link" data-scroll-target="#renaming-the-columns-in-english">4.2.5 Renaming the Columns in English</a></li>
  <li><a href="#brief-eda-of-geospatial-data" id="toc-brief-eda-of-geospatial-data" class="nav-link" data-scroll-target="#brief-eda-of-geospatial-data">4.2.6 Brief EDA of Geospatial Data</a></li>
  </ul></li>
  <li><a href="#data-wrangling-aspatial-data" id="toc-data-wrangling-aspatial-data" class="nav-link" data-scroll-target="#data-wrangling-aspatial-data">4.3 Data Wrangling: Aspatial Data</a>
  <ul class="collapse">
  <li><a href="#pre-importing-eda" id="toc-pre-importing-eda" class="nav-link" data-scroll-target="#pre-importing-eda">4.3.1 Pre-Importing EDA</a></li>
  <li><a href="#creating-an-aspatial-data-pre-processing-function" id="toc-creating-an-aspatial-data-pre-processing-function" class="nav-link" data-scroll-target="#creating-an-aspatial-data-pre-processing-function">4.3.2 Creating an Aspatial Data Pre-processing Function</a></li>
  <li><a href="#importing-the-aspatial-data" id="toc-importing-the-aspatial-data" class="nav-link" data-scroll-target="#importing-the-aspatial-data">4.3.3 Importing the Aspatial Data</a></li>
  <li><a href="#formatting-date-column" id="toc-formatting-date-column" class="nav-link" data-scroll-target="#formatting-date-column">4.3.4 Formatting Date Column</a></li>
  <li><a href="#renaming-columns-to-english" id="toc-renaming-columns-to-english" class="nav-link" data-scroll-target="#renaming-columns-to-english">4.3.4 Renaming Columns to English</a></li>
  <li><a href="#further-data-processing" id="toc-further-data-processing" class="nav-link" data-scroll-target="#further-data-processing">4.3.5 Further Data Processing</a></li>
  </ul></li>
  <li><a href="#geospatial-data-integration" id="toc-geospatial-data-integration" class="nav-link" data-scroll-target="#geospatial-data-integration">4.3 Geospatial Data Integration</a>
  <ul class="collapse">
  <li><a href="#preliminary-joining-eda" id="toc-preliminary-joining-eda" class="nav-link" data-scroll-target="#preliminary-joining-eda">4.3.1 Preliminary joining + EDA</a></li>
  <li><a href="#identifying-mismatched-sub-district-records" id="toc-identifying-mismatched-sub-district-records" class="nav-link" data-scroll-target="#identifying-mismatched-sub-district-records">4.3.2 Identifying Mismatched Sub-District Records</a></li>
  <li><a href="#re-joining-the-geospatial-and-aspatial-data-frames-eda" id="toc-re-joining-the-geospatial-and-aspatial-data-frames-eda" class="nav-link" data-scroll-target="#re-joining-the-geospatial-and-aspatial-data-frames-eda">4.3.3 Re-joining the geospatial and aspatial data frames + EDA</a></li>
  </ul></li>
  <li><a href="#calculation-for-vaccination-rate" id="toc-calculation-for-vaccination-rate" class="nav-link" data-scroll-target="#calculation-for-vaccination-rate">4.4 Calculation for Vaccination Rate</a>
  <ul class="collapse">
  <li><a href="#converting-dataframes-to-sf-objects" id="toc-converting-dataframes-to-sf-objects" class="nav-link" data-scroll-target="#converting-dataframes-to-sf-objects">4.4.1 Converting dataframes to sf objects</a></li>
  </ul></li>
  <li><a href="#choropleth-mapping-and-analysis" id="toc-choropleth-mapping-and-analysis" class="nav-link" data-scroll-target="#choropleth-mapping-and-analysis">4.5 Choropleth Mapping and Analysis</a>
  <ul class="collapse">
  <li><a href="#jenks-choropleth-map" id="toc-jenks-choropleth-map" class="nav-link" data-scroll-target="#jenks-choropleth-map">4.5.1 Jenks Choropleth Map</a></li>
  <li><a href="#observations-from-jenks-choropleth-maps" id="toc-observations-from-jenks-choropleth-maps" class="nav-link" data-scroll-target="#observations-from-jenks-choropleth-maps">4.5.2 Observations from Jenks Choropleth Maps</a></li>
  <li><a href="#spatio-temporal-mapping-with-custom-breakpoints" id="toc-spatio-temporal-mapping-with-custom-breakpoints" class="nav-link" data-scroll-target="#spatio-temporal-mapping-with-custom-breakpoints">4.5.3 Spatio-Temporal Mapping with custom breakpoints</a></li>
  <li><a href="#observations-from-custom-breakplot-maps" id="toc-observations-from-custom-breakplot-maps" class="nav-link" data-scroll-target="#observations-from-custom-breakplot-maps">4.5.4 Observations from Custom Breakplot Maps</a></li>
  </ul></li>
  <li><a href="#local-gi-analysis" id="toc-local-gi-analysis" class="nav-link" data-scroll-target="#local-gi-analysis">4.6 Local Gi* Analysis</a>
  <ul class="collapse">
  <li><a href="#computing-local-gi-values-of-the-monthly-vaccination-rate" id="toc-computing-local-gi-values-of-the-monthly-vaccination-rate" class="nav-link" data-scroll-target="#computing-local-gi-values-of-the-monthly-vaccination-rate">4.6.1 Computing local Gi* values of the monthly vaccination rate</a></li>
  <li><a href="#displaying-the-gi-maps-of-the-monthly-vaccination-rate" id="toc-displaying-the-gi-maps-of-the-monthly-vaccination-rate" class="nav-link" data-scroll-target="#displaying-the-gi-maps-of-the-monthly-vaccination-rate">4.6.2 Displaying the Gi* maps of the monthly vaccination rate</a></li>
  <li><a href="#statistical-conclusions" id="toc-statistical-conclusions" class="nav-link" data-scroll-target="#statistical-conclusions">4.6.3 Statistical conclusions</a></li>
  </ul></li>
  <li><a href="#emerging-hot-spot-analysis-ehsa" id="toc-emerging-hot-spot-analysis-ehsa" class="nav-link" data-scroll-target="#emerging-hot-spot-analysis-ehsa">4.7 Emerging Hot Spot Analysis (EHSA)</a>
  <ul class="collapse">
  <li><a href="#mann-kendall-test" id="toc-mann-kendall-test" class="nav-link" data-scroll-target="#mann-kendall-test">4.7.1 Mann-Kendall Test</a></li>
  <li><a href="#ehsa-map-of-the-gi-values-of-the-vaccination-rate" id="toc-ehsa-map-of-the-gi-values-of-the-vaccination-rate" class="nav-link" data-scroll-target="#ehsa-map-of-the-gi-values-of-the-vaccination-rate">4.7.2 EHSA map of the Gi* values of the vaccination rate</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">5 References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Valencia </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 13, 2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">February 27, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="setting-the-scene" class="level1">
<h1>1 Setting the Scene</h1>
<p>Since late December 2019, an outbreak of a novel coronavirus disease (COVID-19; previously known as 2019-nCoV) was reported in Wuhan, China, which had subsequently affected 210 countries worldwide. In general, COVID-19 is an acute resolved disease but it can also be deadly, with a 2% case fatality rate.</p>
<p>The COVID-19 vaccination in Indonesia is an ongoing mass immunisation in response to the COVID-19 pandemic in Indonesia. On 13 January 2021, the program commenced when President Joko Widodo was vaccinated at the presidential palace. In terms of total doses given, Indonesia ranks third in Asia and fifth in the world.</p>
<p>According to wikipedia, as of 5 February 2023 at 18:00 WIB (UTC+7), 204,266,655 people had received the first dose of the vaccine and 175,131,893 people had been fully vaccinated; 69,597,474 of them had been inoculated with the booster or the third dose, while 1,585,164 had received the fourth dose. Jakarta has the highest percentage of population fully vaccinated with 103.46%, followed by Bali and Special Region of Yogyakarta with 85.45% and 83.02% respectively.</p>
<p>Despite its compactness, the cumulative vaccination rate are not evenly distributed within DKI Jakarta. The question is where are the sub-districts with relatively higher number of vaccination rate and how they changed over time.</p>
</section>
<section id="objectives" class="level1">
<h1>2 Objectives</h1>
<p>Exploratory Spatial Data Analysis (ESDA) hold tremendous potential to address complex problems facing society. In this study, you are tasked to apply appropriate Local Indicators of Spatial Association (LISA) and Emerging Hot Spot Analysis (EHSA) to undercover the spatio-temporal trends of COVID-19 vaccination in DKI Jakarta.</p>
</section>
<section id="the-data" class="level1">
<h1>3 The Data</h1>
<section id="aspatial-data" class="level2">
<h2 class="anchored" data-anchor-id="aspatial-data">3.1 Aspatial Data</h2>
<p>For the purpose of this assignment, data from <a href="https://riwayat-file-vaksinasi-dki-jakarta-jakartagis.hub.arcgis.com/">Riwayat File Vaksinasi DKI Jakarta</a> will be used. Daily vaccination data are provides. You are only required to download either the first day of the month or last day of the month of the study period.</p>
</section>
<section id="geospatial-data" class="level2">
<h2 class="anchored" data-anchor-id="geospatial-data">3.2 Geospatial Data</h2>
<p>For the purpose of this study, DKI Jakarta administration boundary 2019 will be used. The data set can be downloaded at Indonesia Geospatial portal, specifically at <a href="https://www.indonesia-geospasial.com/2020/04/download-shapefile-shp-batas-desa.html">this page</a>.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>The national Projected Coordinates Systems of Indonesia is DGN95 / Indonesia TM-3 zone 54.1.</li>
<li>Exclude all the outer islands from the DKI Jakarta sf data frame, and</li>
<li>Retain the first nine fields in the DKI Jakarta sf data frame. The ninth field JUMLAH_PEN = Total Population.</li>
</ul>
</div>
</div>
</section>
</section>
<section id="getting-started" class="level1">
<h1>4 Getting Started</h1>
<section id="installing-and-loading-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="installing-and-loading-r-packages">4.1 Installing and Loading R packages</h2>
<ul>
<li><a href="https://r-spatial.github.io/sf/">sf</a>: to import, manage, and process geospatial data</li>
<li><a href="https://www.tidyverse.org/">tidyverse</a>: a collection of packages (<a href="https://readr.tidyverse.org/">readr</a> for importing delimited text file, <a href="https://tidyr.tidyverse.org/">tidyr</a> for tidying data, <a href="https://dplyr.tidyverse.org/">dplyr</a> for wrangling data)</li>
<li><a href="https://cran.r-project.org/web/packages/tmap/">tmap</a>: provides functions for plotting cartographic quality static point patterns maps or interactive maps</li>
<li><a href="https://cran.r-project.org/web/packages/sfdep/">sfdep</a>: for spatial dependence of simple features</li>
<li><a href="https://readxl.tidyverse.org/reference/read_excel.html">readxl</a>: for importing Excel worksheets(.xlsx)</li>
<li><a href="https://cran.r-project.org/package=plyr">plyr</a>: for splitting data, applying functions and combining results</li>
<li><a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">kableExtra</a>: for table customisation</li>
<li><a href="https://cran.r-project.org/package=Kendall">Kendall</a>: for Mann-Kendall Test</li>
<li><a href="https://cran.r-project.org/package=plotly">plotly</a> for creating interactive web-based graphs</li>
</ul>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(sf, sfdep, readxl, plyr, kableExtra, tmap, Kendall, plotly, tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="data-wrangling-geospatial-data" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-geospatial-data">4.2 Data Wrangling: Geospatial Data</h2>
<section id="importing-the-geospatial-data" class="level3">
<h3 class="anchored" data-anchor-id="importing-the-geospatial-data">4.2.1 Importing the Geospatial Data</h3>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bd stands for "batas desa", translated as "village boundary"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># reads in geospatial data and stores into bd_jakarta dataframe</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">layer =</span> <span class="st">"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA' from data source 
  `C:\valtyl\IS415-GAA\Take-home_Ex\Take-home_Ex02\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 269 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<p>From the output message, we learn that:</p>
<ul>
<li>Geometry type: Multipolygon</li>
<li>269 features, 161 fields</li>
<li>Assigned CRS is <a href="https://epsg.io/4326">WGS 84</a>, ‘World Geodetic System 1984’ (This is not appropriate as this geospatial dataset is Indonesian-specific hence we will have to use the national CRS of Indonesia, <a href="https://epsg.io/23845">DGN 95</a>, ‘Datum Geodesi Nasional 1995’. We will change this later on.) (Refer to note in section 3.2)</li>
</ul>
</section>
<section id="data-pre-processing" class="level3">
<h3 class="anchored" data-anchor-id="data-pre-processing">4.2.2 Data Pre-Processing</h3>
<p>Before visualising our data, we need to check if there are:</p>
<ul>
<li>invalid geometries</li>
<li>or missing values</li>
</ul>
<p>These can impact future calculations and representations</p>
<section id="invalid-geometries" class="level4">
<h4 class="anchored" data-anchor-id="invalid-geometries">4.2.2.1 Invalid Geometries</h4>
<p>Checking for invalid geometries:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function breakdown:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the st_is_valid function checks whether a geometry is valid</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># which returns the indices of certain values based on logical conditions</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># length returns the length of data objects</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># checks for the number of geometries that are NOT valid</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(bd_jakarta) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>The message output shows that there are no invalid geometries.</p>
</section>
<section id="missing-values" class="level4">
<h4 class="anchored" data-anchor-id="missing-values">4.2.2.2 Missing Values</h4>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the rowSums(is.na(bd_jakarta))!=0 checks every row if there are NA values, returning TRUE or FALSE</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the bd_jakarta 'wrapper' prints said rows that contain NA values</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>bd_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(bd_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 2 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.8412 ymin: -6.154036 xmax: 106.8612 ymax: -6.144973
Geodetic CRS:  WGS 84
    OBJECT_ID KODE_DESA             DESA   KODE    PROVINSI KAB_KOTA KECAMATAN
243     25645  31888888     DANAU SUNTER 318888 DKI JAKARTA     &lt;NA&gt;      &lt;NA&gt;
244     25646  31888888 DANAU SUNTER DLL 318888 DKI JAKARTA     &lt;NA&gt;      &lt;NA&gt;
    DESA_KELUR JUMLAH_PEN JUMLAH_KK LUAS_WILAY KEPADATAN PERPINDAHA JUMLAH_MEN
243       &lt;NA&gt;          0         0          0         0          0          0
244       &lt;NA&gt;          0         0          0         0          0          0
    PERUBAHAN WAJIB_KTP SILAM KRISTEN KHATOLIK HINDU BUDHA KONGHUCU KEPERCAYAA
243         0         0     0       0        0     0     0        0          0
244         0         0     0       0        0     0     0        0          0
    PRIA WANITA BELUM_KAWI KAWIN CERAI_HIDU CERAI_MATI U0 U5 U10 U15 U20 U25
243    0      0          0     0          0          0  0  0   0   0   0   0
244    0      0          0     0          0          0  0  0   0   0   0   0
    U30 U35 U40 U45 U50 U55 U60 U65 U70 U75 TIDAK_BELU BELUM_TAMA TAMAT_SD SLTP
243   0   0   0   0   0   0   0   0   0   0          0          0        0    0
244   0   0   0   0   0   0   0   0   0   0          0          0        0    0
    SLTA DIPLOMA_I DIPLOMA_II DIPLOMA_IV STRATA_II STRATA_III BELUM_TIDA
243    0         0          0          0         0          0          0
244    0         0          0          0         0          0          0
    APARATUR_P TENAGA_PEN WIRASWASTA PERTANIAN NELAYAN AGAMA_DAN PELAJAR_MA
243          0          0          0         0       0         0          0
244          0          0          0         0       0         0          0
    TENAGA_KES PENSIUNAN LAINNYA GENERATED KODE_DES_1 BELUM_ MENGUR_ PELAJAR_
243          0         0       0      &lt;NA&gt;       &lt;NA&gt;      0       0        0
244          0         0       0      &lt;NA&gt;       &lt;NA&gt;      0       0        0
    PENSIUNA_1 PEGAWAI_ TENTARA KEPOLISIAN PERDAG_ PETANI PETERN_ NELAYAN_1
243          0        0       0          0       0      0       0         0
244          0        0       0          0       0      0       0         0
    INDUSTR_ KONSTR_ TRANSP_ KARYAW_ KARYAW1 KARYAW1_1 KARYAW1_12 BURUH BURUH_
243        0       0       0       0       0         0          0     0      0
244        0       0       0       0       0         0          0     0      0
    BURUH1 BURUH1_1 PEMBANT_ TUKANG TUKANG_1 TUKANG_12 TUKANG__13 TUKANG__14
243      0        0        0      0        0         0          0          0
244      0        0        0      0        0         0          0          0
    TUKANG__15 TUKANG__16 TUKANG__17 PENATA PENATA_ PENATA1_1 MEKANIK SENIMAN_
243          0          0          0      0       0         0       0        0
244          0          0          0      0       0         0       0        0
    TABIB PARAJI_ PERANCA_ PENTER_ IMAM_M PENDETA PASTOR WARTAWAN USTADZ JURU_M
243     0       0        0       0      0       0      0        0      0      0
244     0       0        0       0      0       0      0        0      0      0
    PROMOT ANGGOTA_ ANGGOTA1 ANGGOTA1_1 PRESIDEN WAKIL_PRES ANGGOTA1_2
243      0        0        0          0        0          0          0
244      0        0        0          0        0          0          0
    ANGGOTA1_3 DUTA_B GUBERNUR WAKIL_GUBE BUPATI WAKIL_BUPA WALIKOTA WAKIL_WALI
243          0      0        0          0      0          0        0          0
244          0      0        0          0      0          0        0          0
    ANGGOTA1_4 ANGGOTA1_5 DOSEN GURU PILOT PENGACARA_ NOTARIS ARSITEK AKUNTA_
243          0          0     0    0     0          0       0       0       0
244          0          0     0    0     0          0       0       0       0
    KONSUL_ DOKTER BIDAN PERAWAT APOTEK_ PSIKIATER PENYIA_ PENYIA1 PELAUT
243       0      0     0       0       0         0       0       0      0
244       0      0     0       0       0         0       0       0      0
    PENELITI SOPIR PIALAN PARANORMAL PEDAGA_ PERANG_ KEPALA_ BIARAW_ WIRASWAST_
243        0     0      0          0       0       0       0       0          0
244        0     0      0          0       0       0       0       0          0
    LAINNYA_12 LUAS_DESA KODE_DES_3 DESA_KEL_1 KODE_12
243          0         0       &lt;NA&gt;       &lt;NA&gt;       0
244          0         0       &lt;NA&gt;       &lt;NA&gt;       0
                          geometry
243 MULTIPOLYGON (((106.8612 -6...
244 MULTIPOLYGON (((106.8504 -6...</code></pre>
</div>
</div>
<p>The message output shows that there are 2 rows with missing values for the columns <code>KAB_KOTA</code> (City), <code>KECAMATAN</code> (District), <code>DESA_KELUR</code> (Village) and a few more others. We can also see that there are way too many columns, and we will remove the unnecessary columns later on.</p>
<p>To clean up, we will remove the rows that have NA values in <code>DESA_KELUR</code> since we are interested in the dataset on a sub-district level:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes rows that have an NA value in DESA_KELUR</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in context of this data, we can use other columns, such as KAB_KOTA or KECAMATAN</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># but since we're looking at this on a sub-district level, DESA_KELUR seemed most appropriate</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(bd_jakarta,<span class="fu">c</span>(<span class="st">"DESA_KELUR"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="verifying-transforming-the-coordinate-system" class="level4">
<h4 class="anchored" data-anchor-id="verifying-transforming-the-coordinate-system">4.2.2.3 Verifying &amp; Transforming the Coordinate System</h4>
<p>Checking the CRS of <code>bd_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retrieves the coordinate system of bd_jakarta</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(bd_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["latitude",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["longitude",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<p>As mentioned in section 4.2.1, WGS 84 is not appropriate and we should change it to DGN 95:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transforms the CRS to DGN95, ESPG code 23845</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(bd_jakarta, <span class="dv">23845</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Checking if the CRS has been properly assigned:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(bd_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: EPSG:23845 
  wkt:
PROJCRS["DGN95 / Indonesia TM-3 zone 54.1",
    BASEGEOGCRS["DGN95",
        DATUM["Datum Geodesi Nasional 1995",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",4755]],
    CONVERSION["Indonesia TM-3 zone 54.1",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",139.5,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",0.9999,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",200000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",1500000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["easting (X)",east,
            ORDER[1],
            LENGTHUNIT["metre",1]],
        AXIS["northing (Y)",north,
            ORDER[2],
            LENGTHUNIT["metre",1]],
    USAGE[
        SCOPE["Cadastre."],
        AREA["Indonesia - onshore east of 138°E."],
        BBOX[-9.19,138,-1.49,141.01]],
    ID["EPSG",23845]]</code></pre>
</div>
</div>
<p>The transformation is done.</p>
</section>
</section>
<section id="data-visualisation" class="level3">
<h3 class="anchored" data-anchor-id="data-visualisation">4.2.3 Data Visualisation</h3>
<p>First, we will visualise the geometry of Jakarta:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(bd_jakarta))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>From the output, it shows that <code>bd_jakarta</code> includes the main land but also many other outer islands that we are not relevant to our analysis in this assignment. (Refer to note in section 3.2)</p>
<p>To remove the outer islands, we should look at how unique values at the City level, <code>KAB_KOTA</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># outputs unique values of the KAB_KOTA field</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bd_jakarta<span class="sc">$</span><span class="st">"KAB_KOTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "JAKARTA BARAT"    "JAKARTA PUSAT"    "KEPULAUAN SERIBU" "JAKARTA UTARA"   
[5] "JAKARTA TIMUR"    "JAKARTA SELATAN" </code></pre>
</div>
</div>
<p>From the output, the cities within Jakarta have a JAKARTA prefix, while KEPULAUAN SERIBU (which means ‘Thousand Islands’) refers to the outer islands. Visualising <code>KAB_KOTA</code> will confirm this:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># with bd_jakarta as the input data (setting the 'base')</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># draw the KAB_KOTA (city) polygons</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># essentially shades the map according to the city divisions</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bd_jakarta) <span class="sc">+</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"KAB_KOTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The above visualisation proves that KEPULAUAN SERIBU are the outer islands to remove:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filters out the outer islands by accepting only if the value of KAB_KOTA is NOT KEPULAUAN SERIBU</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> <span class="fu">filter</span>(bd_jakarta, KAB_KOTA <span class="sc">!=</span> <span class="st">"KEPULAUAN SERIBU"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="retaining-relavant-columns-only" class="level3">
<h3 class="anchored" data-anchor-id="retaining-relavant-columns-only">4.2.4 Retaining relavant columns only</h3>
<p>As seen in section 4.2.2.2, there were many unnecessary and irrelevant columns that we could remove. (Refer to note in section 3.2)</p>
<p>Retaining the relevant fields (first 9 fields) for our analysis:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filters out other fields by accepting only the first 9 fields</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> bd_jakarta[, <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="renaming-the-columns-in-english" class="level3">
<h3 class="anchored" data-anchor-id="renaming-the-columns-in-english">4.2.5 Renaming the Columns in English</h3>
<p>For ease of comprehension:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># with reference to: https://www.codegrepper.com/code-examples/r/rename+column+name+in+r</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># renames the columns in the style New_Name = OLD_NAME</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> bd_jakarta <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Object_ID=</span>OBJECT_ID,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Province=</span>PROVINSI, </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">City=</span>KAB_KOTA, </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">District=</span>KECAMATAN, </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Village_Code=</span>KODE_DESA, </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Village=</span>DESA, </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sub_District=</span>DESA_KELUR,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Code=</span>KODE, </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Population=</span>JUMLAH_PEN</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="brief-eda-of-geospatial-data" class="level3">
<h3 class="anchored" data-anchor-id="brief-eda-of-geospatial-data">4.2.6 Brief EDA of Geospatial Data</h3>
<p>Summary of <code>bd_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reveals the data type of all fields + some values</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(bd_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 261
Columns: 10
$ Object_ID        &lt;dbl&gt; 25477, 25478, 25397, 25400, 25390, 25391, 25394, 2538…
$ Village_Code     &lt;chr&gt; "3173031006", "3173031007", "3171031003", "3171031006…
$ Village          &lt;chr&gt; "KEAGUNGAN", "GLODOK", "HARAPAN MULIA", "CEMPAKA BARU…
$ Code             &lt;dbl&gt; 317303, 317303, 317103, 317103, 317102, 317102, 31710…
$ Province         &lt;chr&gt; "DKI JAKARTA", "DKI JAKARTA", "DKI JAKARTA", "DKI JAK…
$ City             &lt;chr&gt; "JAKARTA BARAT", "JAKARTA BARAT", "JAKARTA PUSAT", "J…
$ District         &lt;chr&gt; "TAMAN SARI", "TAMAN SARI", "KEMAYORAN", "KEMAYORAN",…
$ Sub_District     &lt;chr&gt; "KEAGUNGAN", "GLODOK", "HARAPAN MULIA", "CEMPAKA BARU…
$ Total_Population &lt;dbl&gt; 21609, 9069, 29085, 41913, 15793, 33383, 35906, 21828…
$ geometry         &lt;MULTIPOLYGON [m]&gt; MULTIPOLYGON (((-3626874 69..., MULTIPOL…</code></pre>
</div>
</div>
<p>Number of unique sub-districts:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(bd_jakarta<span class="sc">$</span><span class="st">"Sub_District"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 261</code></pre>
</div>
</div>
<p>Number of unique districts:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(bd_jakarta<span class="sc">$</span><span class="st">"District"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 42</code></pre>
</div>
</div>
<p>Number of unique cities:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(bd_jakarta<span class="sc">$</span><span class="st">"City"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p>There are 261 unique sub-districts, 42 unique districts and 5 unique cities. The maximum number of categories for mapping with tmap is 30. Even though max.categories can be adjusted in tmap_options, too many segmented sections on a single map will not provide much insights hence we should do the EDA at ‘City’ level:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shades the map according to the city divisions</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bd_jakarta) <span class="sc">+</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"City"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="data-wrangling-aspatial-data" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-aspatial-data">4.3 Data Wrangling: Aspatial Data</h2>
<section id="pre-importing-eda" class="level3">
<h3 class="anchored" data-anchor-id="pre-importing-eda">4.3.1 Pre-Importing EDA</h3>
<p>For the aspatial data, I have decided to download the data for last day of every month from July 2021 to June 2022. However, the last day of Feb 2022 provided on the website in section 3.1 is 27 Feb instead of 28 Feb.</p>
<p>This section is to check for any discrepancies in each .xlsx file in the ‘data/aspatial’ folder by performing EDA:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>jul2021 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Juli 2021).xlsx"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(jul2021)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 27
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 4441501, 12333, 13875, 18…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 4499710, 11614, 15506, 10…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 1663218, 4181, 4798, 3658…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 6162928, 15795, 20304, 14…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 502579, 1230, 2012, 865, …
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 440910, 1069, 1729, 701, …
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 943489, 2299, 3741, 1566,…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1052883, 3333, 2586, 2837…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 666009, 2158, 1374, 1761,…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 1718892, 5491, 3960, 4598…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 56660, 78, 122, 174, 71, …
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 38496, 51, 84, 106, 57, 7…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 95156, 129, 206, 280, 128…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 76397, 101, 90, 215, 73, …
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 67484, 91, 82, 192, 67, 3…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 143881, 192, 172, 407, 14…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 2279398, 5506, 9012, 5408…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 446028, 789, 1519, 897, 4…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 2725426, 6295, 10531, 630…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 531793, 1366, 1684, 1261,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 4291, 23, 10, 1, 1, 8, 6,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 536084, 1389, 1694, 1262,…</code></pre>
</div>
</div>
<p>The above output shows that there are no duplicates for the columns.</p>
<p>Below, similar codes were used to check for the other excel files. There are no duplicates in the rest of the files. Doing a quick comparison, we can notice that the excel files for July 2021 to February 2022 have 27 columns while those for March 2022 to June 2022 have 34 columns.</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>aug2021 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Agustus 2021).xlsx"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(aug2021)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 27
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 3277484, 9191, 10400, 125…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 5663727, 14756, 18981, 16…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 3412906, 8935, 10470, 776…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 9076633, 23691, 29451, 24…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 535001, 1300, 2104, 1043,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 468678, 1140, 1849, 780, …
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1003679, 2440, 3953, 1823…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1393352, 4194, 3643, 4293…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1007921, 3135, 2519, 2548…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 2401273, 7329, 6162, 6841…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 65340, 89, 137, 188, 80, …
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 53995, 77, 119, 163, 71, …
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 119335, 166, 256, 351, 15…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 79502, 106, 92, 229, 78, …
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 72588, 96, 83, 203, 74, 3…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 152090, 202, 175, 432, 15…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 2941837, 7385, 11033, 872…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 1377349, 3277, 4541, 3010…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 4319186, 10662, 15574, 11…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 648695, 1682, 1972, 2090,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 432375, 1210, 1359, 1062,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1081070, 2892, 3331, 3152…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>sep2021 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 September 2021).xlsx"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sep2021)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 27
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 2235772, 6688, 7581, 8708…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 6705439, 17259, 21800, 20…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 5171697, 13376, 16438, 14…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 11877136, 30635, 38238, 3…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 587215, 1417, 2270, 1263,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 518944, 1263, 2033, 988, …
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1106159, 2680, 4303, 2251…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1468382, 3938, 3883, 4540…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1305200, 3454, 3356, 3903…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 2773582, 7392, 7239, 8443…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 84049, 158, 173, 248, 100…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 75657, 148, 157, 229, 91,…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 159706, 306, 330, 477, 19…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 112296, 140, 135, 329, 11…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 104381, 124, 125, 300, 11…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 216677, 264, 260, 629, 23…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 3677943, 9564, 12969, 114…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 2548057, 6788, 8944, 7023…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 6226000, 16352, 21913, 18…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 775554, 2042, 2370, 2510,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 619458, 1599, 1823, 1969,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1395012, 3641, 4193, 4479…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>oct2021 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Oktober 2021).xlsx"</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(oct2021)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 27
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1880524, 5991, 6557, 7586…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7060687, 17956, 22824, 21…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 5729001, 14504, 18185, 16…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 12789688, 32460, 41009, 3…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 608940, 1447, 2336, 1322,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 543483, 1296, 2104, 1104,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1152423, 2743, 4440, 2426…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1484292, 3972, 3917, 4595…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1349105, 3555, 3465, 4072…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 2833397, 7527, 7382, 8667…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 86323, 165, 175, 259, 101…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 81721, 160, 168, 245, 96,…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 168044, 325, 343, 504, 19…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 113911, 140, 136, 338, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 107383, 128, 128, 310, 12…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 221294, 268, 264, 648, 24…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 3948804, 10101, 13744, 12…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 2949023, 7567, 10266, 849…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 6897827, 17668, 24010, 20…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 818417, 2131, 2516, 2672,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 698286, 1798, 2054, 2220,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1516703, 3929, 4570, 4892…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>nov2021 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 November 2021).xlsx"</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nov2021)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 27
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1723821, 5527, 5986, 6802…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7217390, 18420, 23395, 22…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6172636, 15466, 19404, 18…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 13390026, 33886, 42799, 4…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 624751, 1473, 2391, 1385,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 571830, 1351, 2192, 1224,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1196581, 2824, 4583, 2609…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1487961, 3980, 3926, 4614…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1369705, 3601, 3516, 4146…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 2857666, 7581, 7442, 8760…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 86710, 169, 176, 259, 101…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 83506, 163, 172, 252, 98,…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 170216, 332, 348, 511, 19…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 114292, 140, 135, 341, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 109221, 128, 128, 323, 12…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 223513, 268, 263, 664, 24…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4069550, 10473, 14182, 12…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3304266, 8329, 11215, 978…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 7373816, 18802, 25397, 22…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 834126, 2185, 2585, 2733,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 734108, 1894, 2181, 2355,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1568234, 4079, 4766, 5088…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>dec2021 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Desember 2021).xlsx"</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dec2021)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 27
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1623736, 5062, 5626, 6335…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7317475, 18885, 23755, 22…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6370175, 15996, 20026, 18…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 13687650, 34881, 43781, 4…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 634516, 1520, 2427, 1418,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 586624, 1375, 2247, 1294,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1221140, 2895, 4674, 2712…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1485857, 3981, 3922, 4603…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1372180, 3607, 3521, 4153…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 2858037, 7588, 7443, 8756…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 86905, 169, 176, 260, 101…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 83995, 164, 174, 253, 99,…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 170900, 333, 350, 513, 20…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 114612, 140, 136, 345, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 110119, 128, 129, 327, 12…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 224731, 268, 265, 672, 24…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4150113, 10841, 14450, 13…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3467714, 8782, 11715, 104…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 7617827, 19623, 26165, 23…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 845472, 2234, 2644, 2783,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 749543, 1940, 2240, 2401,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1595015, 4174, 4884, 5184…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>jan2022 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Januari 2022).xlsx"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(jan2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 27
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1538221, 4647, 5388, 5967…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7402990, 19300, 23993, 23…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6516678, 16477, 20463, 19…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 13919668, 35777, 44456, 4…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 644280, 1564, 2459, 1446,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 598309, 1399, 2291, 1327,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1242589, 2963, 4750, 2773…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1478564, 3971, 3900, 4592…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1369268, 3604, 3506, 4158…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 2847832, 7575, 7406, 8750…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 88073, 177, 178, 262, 102…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 85942, 171, 179, 260, 99,…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 174015, 348, 357, 522, 20…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 115123, 140, 135, 348, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 111364, 130, 130, 331, 12…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 226487, 270, 265, 679, 24…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4215232, 11158, 14620, 13…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3579348, 9173, 12024, 109…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 7794580, 20331, 26644, 24…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 861718, 2290, 2701, 2840,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 772447, 2000, 2333, 2488,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1634165, 4290, 5034, 5328…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>feb2022 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (27 Februari 2022).xlsx"</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(feb2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 27
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1517196, 4592, 5319, 5903…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7424015, 19355, 24062, 23…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6590380, 16687, 20738, 19…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 14014395, 36042, 44800, 4…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 646481, 1567, 2465, 1451,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 604751, 1418, 2336, 1348,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1251232, 2985, 4801, 2799…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1478545, 3971, 3899, 4590…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1371190, 3614, 3512, 4161…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 2849735, 7585, 7411, 8751…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 88088, 178, 178, 262, 102…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 86046, 171, 179, 260, 99,…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 174134, 349, 357, 522, 20…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 115186, 140, 135, 348, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 111623, 130, 130, 331, 12…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 226809, 270, 265, 679, 24…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4232389, 11200, 14670, 13…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3638187, 9327, 12227, 111…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 7870576, 20527, 26897, 24…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 863326, 2299, 2715, 2845,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 778583, 2027, 2354, 2512,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1641909, 4326, 5069, 5357…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>mar2022 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Maret 2022).xlsx"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mar2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 34
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1482471, 4522, 5186, 5780…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7458740, 19425, 24195, 23…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6682911, 16909, 21000, 20…
$ `JUMLAH\r\nDOSIS 3`                          &lt;dbl&gt; 1836511, 3934, 6122, 4124…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 15978162, 40268, 51317, 4…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 649601, 1574, 2475, 1457,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 610754, 1433, 2350, 1366,…
$ `LANSIA\r\nDOSIS 3`                          &lt;dbl&gt; 610754, 1433, 2350, 1366,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1533150, 3545, 6052, 3283…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1481237, 3980, 3910, 4604…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1375686, 3634, 3523, 4175…
$ `PELAYAN PUBLIK\r\nDOSIS 3`                  &lt;dbl&gt; 200536, 579, 660, 453, 24…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 3057459, 8193, 8093, 9232…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 88150, 178, 178, 262, 102…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 86122, 173, 179, 260, 99,…
$ `GOTONG ROYONG\r\nDOSIS 3`                   &lt;dbl&gt; 19460, 22, 53, 57, 19, 41…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 193732, 373, 410, 579, 22…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 115527, 140, 135, 348, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 112027, 130, 130, 331, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 3`                &lt;dbl&gt; 84640, 103, 94, 239, 83, …
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 312194, 373, 359, 918, 32…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4258776, 11250, 14773, 13…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3715052, 9502, 12436, 114…
$ `TAHAPAN 3\r\nDOSIS 3`                       &lt;dbl&gt; 1248211, 2671, 4048, 2891…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 9222039, 23423, 31257, 28…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 865449, 2303, 2724, 2851,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 783270, 2037, 2382, 2541,…
$ `REMAJA\r\nDOSIS 3`                          &lt;dbl&gt; 10869, 21, 40, 24, 7, 28,…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1659588, 4361, 5146, 5416…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>apr2022 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 April 2022).xlsx"</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(apr2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 34
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1453423, 4449, 5101, 5699…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7487788, 19498, 24280, 23…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6727002, 17027, 21134, 20…
$ `JUMLAH\r\nDOSIS 3`                          &lt;dbl&gt; 2720796, 6568, 8915, 6491…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 16935586, 43093, 54329, 5…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 651696, 1579, 2481, 1458,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 613044, 1441, 2360, 1376,…
$ `LANSIA\r\nDOSIS 3`                          &lt;dbl&gt; 613044, 1441, 2360, 1376,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1599248, 3750, 6301, 3425…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1483630, 3983, 3920, 4611…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1378338, 3640, 3529, 4187…
$ `PELAYAN PUBLIK\r\nDOSIS 3`                  &lt;dbl&gt; 366145, 1099, 1096, 941, …
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 3228113, 8722, 8545, 9739…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 88200, 178, 178, 262, 102…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 86184, 173, 179, 260, 99,…
$ `GOTONG ROYONG\r\nDOSIS 3`                   &lt;dbl&gt; 38179, 71, 95, 120, 41, 7…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 212563, 422, 452, 642, 24…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 115623, 140, 135, 348, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 112253, 130, 130, 333, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 3`                &lt;dbl&gt; 89811, 109, 105, 259, 91,…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 317687, 379, 370, 940, 33…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4281576, 11308, 14842, 13…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3750893, 9596, 12545, 116…
$ `TAHAPAN 3\r\nDOSIS 3`                       &lt;dbl&gt; 1866526, 4503, 6084, 4519…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 9898995, 25407, 33471, 29…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 867063, 2310, 2724, 2858,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 786290, 2047, 2391, 2557,…
$ `REMAJA\r\nDOSIS 3`                          &lt;dbl&gt; 25627, 56, 75, 61, 19, 71…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1678980, 4413, 5190, 5476…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>may2022 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Mei 2022).xlsx"</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(may2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 34
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1445540, 4440, 5084, 5676…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7495671, 19507, 24297, 23…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6743764, 17077, 21182, 20…
$ `JUMLAH\r\nDOSIS 3`                          &lt;dbl&gt; 2885301, 7022, 9484, 7030…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 17124736, 43606, 54963, 5…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 652411, 1580, 2482, 1461,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 614259, 1442, 2367, 1378,…
$ `LANSIA\r\nDOSIS 3`                          &lt;dbl&gt; 614259, 1442, 2367, 1378,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1615382, 3804, 6385, 3468…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1483896, 3982, 3920, 4612…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1379577, 3645, 3534, 4192…
$ `PELAYAN PUBLIK\r\nDOSIS 3`                  &lt;dbl&gt; 395504, 1185, 1185, 1033,…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 3258977, 8812, 8639, 9837…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 88234, 179, 178, 262, 102…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 86232, 173, 179, 260, 99,…
$ `GOTONG ROYONG\r\nDOSIS 3`                   &lt;dbl&gt; 43402, 100, 111, 132, 53,…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 217868, 452, 468, 654, 25…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 115658, 140, 135, 348, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 112327, 130, 131, 333, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 3`                &lt;dbl&gt; 91061, 110, 108, 262, 93,…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 319046, 380, 374, 943, 33…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4287820, 11318, 14850, 13…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3763773, 9632, 12577, 116…
$ `TAHAPAN 3\r\nDOSIS 3`                       &lt;dbl&gt; 1975879, 4777, 6455, 4893…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 10027472, 25727, 33882, 3…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 867652, 2308, 2732, 2858,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 787596, 2055, 2394, 2562,…
$ `REMAJA\r\nDOSIS 3`                          &lt;dbl&gt; 30743, 68, 89, 81, 26, 80…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1685991, 4431, 5215, 5501…</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>jun2022 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 Juni 2022).xlsx"</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(jun2022)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 268
Columns: 34
$ `KODE KELURAHAN`                             &lt;chr&gt; NA, "3172051003", "317304…
$ `WILAYAH KOTA`                               &lt;chr&gt; NA, "JAKARTA UTARA", "JAK…
$ KECAMATAN                                    &lt;chr&gt; NA, "PADEMANGAN", "TAMBOR…
$ KELURAHAN                                    &lt;chr&gt; "TOTAL", "ANCOL", "ANGKE"…
$ SASARAN                                      &lt;dbl&gt; 8941211, 23947, 29381, 29…
$ `BELUM VAKSIN`                               &lt;dbl&gt; 1431393, 4402, 5041, 5632…
$ `JUMLAH\r\nDOSIS 1`                          &lt;dbl&gt; 7509818, 19545, 24340, 23…
$ `JUMLAH\r\nDOSIS 2`                          &lt;dbl&gt; 6756584, 17106, 21213, 20…
$ `JUMLAH\r\nDOSIS 3`                          &lt;dbl&gt; 3031594, 7369, 10086, 739…
$ `TOTAL VAKSIN\r\nDIBERIKAN`                  &lt;dbl&gt; 17297996, 44020, 55639, 5…
$ `LANSIA\r\nDOSIS 1`                          &lt;dbl&gt; 653401, 1582, 2483, 1466,…
$ `LANSIA\r\nDOSIS 2`                          &lt;dbl&gt; 615341, 1447, 2368, 1382,…
$ `LANSIA\r\nDOSIS 3`                          &lt;dbl&gt; 615341, 1447, 2368, 1382,…
$ `LANSIA TOTAL \r\nVAKSIN DIBERIKAN`          &lt;dbl&gt; 1630553, 3848, 6464, 3495…
$ `PELAYAN PUBLIK\r\nDOSIS 1`                  &lt;dbl&gt; 1484892, 3982, 3924, 4613…
$ `PELAYAN PUBLIK\r\nDOSIS 2`                  &lt;dbl&gt; 1380501, 3646, 3536, 4195…
$ `PELAYAN PUBLIK\r\nDOSIS 3`                  &lt;dbl&gt; 420795, 1244, 1265, 1104,…
$ `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN`   &lt;dbl&gt; 3286188, 8872, 8725, 9912…
$ `GOTONG ROYONG\r\nDOSIS 1`                   &lt;dbl&gt; 88277, 180, 178, 262, 102…
$ `GOTONG ROYONG\r\nDOSIS 2`                   &lt;dbl&gt; 86277, 174, 179, 260, 99,…
$ `GOTONG ROYONG\r\nDOSIS 3`                   &lt;dbl&gt; 45143, 104, 115, 135, 56,…
$ `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN`    &lt;dbl&gt; 219697, 458, 472, 657, 25…
$ `TENAGA KESEHATAN\r\nDOSIS 1`                &lt;dbl&gt; 115697, 140, 135, 348, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 2`                &lt;dbl&gt; 112383, 130, 131, 333, 12…
$ `TENAGA KESEHATAN\r\nDOSIS 3`                &lt;dbl&gt; 91999, 113, 108, 266, 95,…
$ `TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt; 320079, 383, 374, 947, 33…
$ `TAHAPAN 3\r\nDOSIS 1`                       &lt;dbl&gt; 4298906, 11352, 14884, 13…
$ `TAHAPAN 3\r\nDOSIS 2`                       &lt;dbl&gt; 3773713, 9652, 12601, 116…
$ `TAHAPAN 3\r\nDOSIS 3`                       &lt;dbl&gt; 2075349, 5009, 6872, 5151…
$ `TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN`        &lt;dbl&gt; 10147968, 26013, 34357, 3…
$ `REMAJA\r\nDOSIS 1`                          &lt;dbl&gt; 868645, 2309, 2736, 2862,…
$ `REMAJA\r\nDOSIS 2`                          &lt;dbl&gt; 788369, 2057, 2398, 2564,…
$ `REMAJA\r\nDOSIS 3`                          &lt;dbl&gt; 36497, 80, 113, 95, 29, 1…
$ `REMAJA TOTAL\r\nVAKSIN DIBERIKAN`           &lt;dbl&gt; 1693511, 4446, 5247, 5521…</code></pre>
</div>
</div>
</section>
<section id="creating-an-aspatial-data-pre-processing-function" class="level3">
<h3 class="anchored" data-anchor-id="creating-an-aspatial-data-pre-processing-function">4.3.2 Creating an Aspatial Data Pre-processing Function</h3>
<p>Firstly, here are some requirements for our aspatial data:</p>
<p>Columns of interest:</p>
<ul>
<li>KODE KELURAHAN: sub-district code</li>
<li>KELURAHAN: sub-district</li>
<li>SASARAN: target</li>
<li>BELUM VAKSIN: not yet vaccinated</li>
</ul>
<p>We need to create an extra Date column that has the month and year of the observation. Note that the files have a naming convention “Data Vaksinasi Berbasis Kelurahan (DD Month YYYY).xlsx”</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># takes in an aspatial data filepath and returns a processed output</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>aspatial_preprocess <span class="ot">&lt;-</span> <span class="cf">function</span>(filepath){</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we use [-1,] to remove the first row of the file as the first row is a subheader row</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  result_file <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(filepath)[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create the Date Column</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the format of our files is: Data Vaksinasi Berbasis Kelurahan (DD Month YYYY)</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># while the start is technically "(", "(" is part of a regular expression and leads to a warning message, so we'll use "Kelurahan" instead. The [[1]] refers to the first element in the list.</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we're loading it as DD-Month-YYYY format</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># to get the end index, we use the length of the filepath - 6 </span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># as such, the most relevant functions are substr (returns a substring) and either str_locate (returns location of substring as an integer matrix) or gregexpr (returns a list of locations of substring)</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reference https://stackoverflow.com/questions/14249562/find-the-location-of-a-character-in-string</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  startpoint <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="at">pattern=</span><span class="st">"Kelurahan"</span>, filepath)[[<span class="dv">1</span>]] <span class="sc">+</span> <span class="dv">11</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>  result_file<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">substr</span>(filepath, startpoint, <span class="fu">nchar</span>(filepath)<span class="sc">-</span><span class="dv">6</span>)</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Retain the Relevant Columns</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>  result_file <span class="ot">&lt;-</span> result_file <span class="sc">%&gt;%</span> </span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="st">"Date"</span>, </span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>           <span class="st">"KODE KELURAHAN"</span>, </span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>           <span class="st">"KELURAHAN"</span>, </span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>           <span class="st">"SASARAN"</span>, </span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>           <span class="st">"BELUM VAKSIN"</span>)</span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result_file)</span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="importing-the-aspatial-data" class="level3">
<h3 class="anchored" data-anchor-id="importing-the-aspatial-data">4.3.3 Importing the Aspatial Data</h3>
<p>Feeding Files into the <code>aspatial_preprocess</code> function using list.files() and <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/lapply">lapply()</a> to apply a function to all elements in the list:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in the folder 'data/aspatial', find files with the extension '.xlsx' and add it to our fileslist </span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the full.names=TRUE prepends the directory path to the file names, giving a relative file path - otherwise, only the file names (not the paths) would be returned </span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># reference: https://stat.ethz.ch/R-manual/R-devel/library/base/html/list.files.html</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>fileslist <span class="ot">&lt;-</span><span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">"data/aspatial"</span>, <span class="at">pattern =</span> <span class="st">"*.xlsx"</span>, <span class="at">full.names=</span><span class="cn">TRUE</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="co"># afterwards, for every element in fileslist, apply aspatial_process function</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>dflist <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">seq_along</span>(fileslist), <span class="cf">function</span>(x) <span class="fu">aspatial_preprocess</span>(fileslist[x]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Converting the <code>dflist</code> into an actual dataframe using <a href="https://www.rdocumentation.org/packages/plyr/versions/1.8.6/topics/ldply">ldply()</a>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>vacc_jakarta <span class="ot">&lt;-</span> <span class="fu">ldply</span>(dflist, data.frame)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Checking <code>vacc_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(vacc_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 3,204
Columns: 5
$ Date           &lt;chr&gt; "27 Februari 2022", "27 Februari 2022", "27 Februari 20…
$ KODE.KELURAHAN &lt;chr&gt; "3172051003", "3173041007", "3175041005", "3175031003",…
$ KELURAHAN      &lt;chr&gt; "ANCOL", "ANGKE", "BALE KAMBANG", "BALI MESTER", "BAMBU…
$ SASARAN        &lt;dbl&gt; 23947, 29381, 29074, 9752, 26285, 21566, 23886, 47898, …
$ BELUM.VAKSIN   &lt;dbl&gt; 4592, 5319, 5903, 1649, 4030, 3950, 3344, 9382, 3772, 7…</code></pre>
</div>
</div>
</section>
<section id="formatting-date-column" class="level3">
<h3 class="anchored" data-anchor-id="formatting-date-column">4.3.4 Formatting Date Column</h3>
<p>The Dates are currently in string format as there were derived from the file names, hence we need to convert the Dates into datetime format.</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parses the 'Date' column into Month(Full Name)-YYYY datetime objects</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co"># reference: https://stackoverflow.com/questions/53380650/b-y-date-conversion-gives-na</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># locale="ind" means that the locale has been set as Indonesia</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setlocale</span>(<span class="at">locale=</span><span class="st">"ind"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "LC_COLLATE=Indonesian_Indonesia.1252;LC_CTYPE=Indonesian_Indonesia.1252;LC_MONETARY=Indonesian_Indonesia.1252;LC_NUMERIC=C;LC_TIME=Indonesian_Indonesia.1252"</code></pre>
</div>
</div>
<p>Converting to datetime format:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>vacc_jakarta<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">c</span>(vacc_jakarta<span class="sc">$</span>Date) <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.Date</span>(vacc_jakarta<span class="sc">$</span>Date, <span class="at">format =</span><span class="st">"%d %B %Y"</span>)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(vacc_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 3,204
Columns: 5
$ Date           &lt;date&gt; 2022-02-27, 2022-02-27, 2022-02-27, 2022-02-27, 2022-0~
$ KODE.KELURAHAN &lt;chr&gt; "3172051003", "3173041007", "3175041005", "3175031003",~
$ KELURAHAN      &lt;chr&gt; "ANCOL", "ANGKE", "BALE KAMBANG", "BALI MESTER", "BAMBU~
$ SASARAN        &lt;dbl&gt; 23947, 29381, 29074, 9752, 26285, 21566, 23886, 47898, ~
$ BELUM.VAKSIN   &lt;dbl&gt; 4592, 5319, 5903, 1649, 4030, 3950, 3344, 9382, 3772, 7~</code></pre>
</div>
</div>
</section>
<section id="renaming-columns-to-english" class="level3">
<h3 class="anchored" data-anchor-id="renaming-columns-to-english">4.3.4 Renaming Columns to English</h3>
<p>Renaming columns to English for ease of comprehension:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># renames the columns in the style New_Name = OLD_NAME</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>vacc_jakarta <span class="ot">&lt;-</span> vacc_jakarta <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Date=</span>Date,</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sub_District_Code=</span>KODE.KELURAHAN,</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sub_District=</span>KELURAHAN, </span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Target=</span>SASARAN, </span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Not_Yet_Vaccinated=</span>BELUM.VAKSIN</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="further-data-processing" class="level3">
<h3 class="anchored" data-anchor-id="further-data-processing">4.3.5 Further Data Processing</h3>
<p>After finalising the dataframe, we can proceed with other data processing requirements.</p>
<p>Checking for missing values:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns rows that contain NA values</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>vacc_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(vacc_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Date               Sub_District_Code  Sub_District       Target            
[5] Not_Yet_Vaccinated
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>From the output, there are no missing values.</p>
</section>
</section>
<section id="geospatial-data-integration" class="level2">
<h2 class="anchored" data-anchor-id="geospatial-data-integration">4.3 Geospatial Data Integration</h2>
<section id="preliminary-joining-eda" class="level3">
<h3 class="anchored" data-anchor-id="preliminary-joining-eda">4.3.1 Preliminary joining + EDA</h3>
<p>We need to join the geospatial and aspatial data frames but we first need to see what they both commonly have.</p>
<p>Check column names of <code>bd_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(bd_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Object_ID"        "Village_Code"     "Village"          "Code"            
 [5] "Province"         "City"             "District"         "Sub_District"    
 [9] "Total_Population" "geometry"        </code></pre>
</div>
</div>
<p>Check column names of <code>vacc_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(vacc_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"               "Sub_District_Code"  "Sub_District"      
[4] "Target"             "Not_Yet_Vaccinated"</code></pre>
</div>
</div>
<p>We are able to see that we can join the dataframes with <code>Sub_District</code> and <code>Sub_District_Code</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(bd_jakarta, vacc_jakarta,</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by=</span><span class="fu">c</span>(</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"Sub_District"</span>, </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Village_Code"</span><span class="ot">=</span><span class="st">"Sub_District_Code"</span>)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>                              )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Visualising <code>combined_jakarta</code> in terms of:</p>
<ul>
<li>population not yet vaccinated</li>
<li>target population to be vaccinated</li>
<li>total population</li>
</ul>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>not_yet_vaccinated <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Not_Yet_Vaccinated"</span>) <span class="sc">+</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Not Yet Vaccinated Count"</span>)</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>target <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Target"</span>) <span class="sc">+</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Target Count"</span>)</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>total_population <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Total_Population"</span>) <span class="sc">+</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Total Count"</span>)</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(not_yet_vaccinated, target, total_population)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Checking for empty rows in <code>vacc_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>vacc_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(vacc_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Date               Sub_District_Code  Sub_District       Target            
[5] Not_Yet_Vaccinated
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>Checking for empty rows in <code>bd_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>bd_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(bd_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 9 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Projected CRS: DGN95 / Indonesia TM-3 zone 54.1
 [1] Object_ID        Village_Code     Village          Code            
 [5] Province         City             District         Sub_District    
 [9] Total_Population geometry        
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>There are some missing values in the visualisations even though there are no rows with missing values in <code>vacc_jakarta</code> and <code>bd_jakarta</code> individually. This could be due to the mismatch in the values due to slightly different namings for the same sub-district when the left join was done.</p>
</section>
<section id="identifying-mismatched-sub-district-records" class="level3">
<h3 class="anchored" data-anchor-id="identifying-mismatched-sub-district-records">4.3.2 Identifying Mismatched Sub-District Records</h3>
<p>Checking for unique values of Sub-District in <code>vacc_jakarta</code> but not in <code>bd_jakarta</code> and vice versa:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>vacc_subdistrict <span class="ot">&lt;-</span> <span class="fu">c</span>(vacc_jakarta<span class="sc">$</span>Sub_District)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>bd_subdistrict <span class="ot">&lt;-</span> <span class="fu">c</span>(bd_jakarta<span class="sc">$</span>Sub_District)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(vacc_subdistrict[<span class="sc">!</span>(vacc_subdistrict <span class="sc">%in%</span> bd_subdistrict)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "BALE KAMBANG"          "HALIM PERDANA KUSUMAH" "JATI PULO"            
 [4] "KAMPUNG TENGAH"        "KERENDANG"             "KRAMAT JATI"          
 [7] "PAL MERIAM"            "PINANG RANTI"          "PULAU HARAPAN"        
[10] "PULAU KELAPA"          "PULAU PANGGANG"        "PULAU PARI"           
[13] "PULAU TIDUNG"          "PULAU UNTUNG JAWA"     "RAWA JATI"            </code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bd_subdistrict[<span class="sc">!</span>(bd_subdistrict <span class="sc">%in%</span> vacc_subdistrict)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KRENDANG"             "RAWAJATI"             "TENGAH"              
[4] "BALEKAMBANG"          "PINANGRANTI"          "JATIPULO"            
[7] "PALMERIAM"            "KRAMATJATI"           "HALIM PERDANA KUSUMA"</code></pre>
</div>
</div>
<p>Table to view difference in naming:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initialise a dataframe of our cases vs bd subdistrict spelling</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>spelling <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Aspatial_Cases=</span><span class="fu">c</span>(<span class="st">"BALE KAMBANG"</span>, <span class="st">"HALIM PERDANA KUSUMAH"</span>, <span class="st">"JATI PULO"</span>, <span class="st">"KAMPUNG TENGAH"</span>, <span class="st">"KERENDANG"</span>, <span class="st">"KRAMAT JATI"</span>, <span class="st">"PAL MERIAM"</span>, <span class="st">"PINANG RANTI"</span>, <span class="st">"RAWA JATI"</span>),</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Geospatial_BD=</span><span class="fu">c</span>(<span class="st">"BALEKAMBAG"</span>, <span class="st">"HALIM PERDANA KUSUMA"</span>, <span class="st">"JATIPULO"</span>, <span class="st">"TENGAH"</span>, <span class="st">"KRENDANG"</span>, <span class="st">"KRAMATJATI"</span>, <span class="st">"PALMERIAM"</span>, <span class="st">"PINANGRANTI"</span>, <span class="st">"RAWAJATI"</span>)</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="co"># with dataframe a input, outputs a kable</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(spelling, <span class="at">caption=</span><span class="st">"Mismatched Records"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_material</span>(<span class="st">"hover"</span>, <span class="at">latex_options=</span><span class="st">"scale_down"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class=" lightable-material lightable-hover" style="font-family: &quot;Source Sans Pro&quot;, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>Mismatched Records</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Aspatial_Cases </th>
   <th style="text-align:left;"> Geospatial_BD </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> BALE KAMBANG </td>
   <td style="text-align:left;"> BALEKAMBAG </td>
  </tr>
  <tr>
   <td style="text-align:left;"> HALIM PERDANA KUSUMAH </td>
   <td style="text-align:left;"> HALIM PERDANA KUSUMA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> JATI PULO </td>
   <td style="text-align:left;"> JATIPULO </td>
  </tr>
  <tr>
   <td style="text-align:left;"> KAMPUNG TENGAH </td>
   <td style="text-align:left;"> TENGAH </td>
  </tr>
  <tr>
   <td style="text-align:left;"> KERENDANG </td>
   <td style="text-align:left;"> KRENDANG </td>
  </tr>
  <tr>
   <td style="text-align:left;"> KRAMAT JATI </td>
   <td style="text-align:left;"> KRAMATJATI </td>
  </tr>
  <tr>
   <td style="text-align:left;"> PAL MERIAM </td>
   <td style="text-align:left;"> PALMERIAM </td>
  </tr>
  <tr>
   <td style="text-align:left;"> PINANG RANTI </td>
   <td style="text-align:left;"> PINANGRANTI </td>
  </tr>
  <tr>
   <td style="text-align:left;"> RAWA JATI </td>
   <td style="text-align:left;"> RAWAJATI </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Correcting the mismatched sub-district records in <code>bd_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># where bd_jakarta is a mismatched value, replace with the correct value</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'BALEKAMBANG'</span>] <span class="ot">&lt;-</span> <span class="st">'BALE KAMBANG'</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'HALIM PERDANA KUSUMA'</span>] <span class="ot">&lt;-</span> <span class="st">'HALIM PERDANA KUSUMAH'</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'JATIPULO'</span>] <span class="ot">&lt;-</span> <span class="st">'JATI PULO'</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KALI BARU'</span>] <span class="ot">&lt;-</span> <span class="st">'KALIBARU'</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'TENGAH'</span>] <span class="ot">&lt;-</span> <span class="st">'KAMPUNG TENGAH'</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KRAMATJATI'</span>] <span class="ot">&lt;-</span> <span class="st">'KRAMAT JATI'</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KRENDANG'</span>] <span class="ot">&lt;-</span> <span class="st">'KERENDANG'</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'PALMERIAM'</span>] <span class="ot">&lt;-</span> <span class="st">'PAL MERIAM'</span></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'PINANGRANTI'</span>] <span class="ot">&lt;-</span> <span class="st">'PINANG RANTI'</span></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'RAWAJATI'</span>] <span class="ot">&lt;-</span> <span class="st">'RAWA JATI'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There are 6 more unique values in <code>vacc_jakarta</code> as those values are data referring to the outer islands looking at the fact that the rows under the column “WILAYAH KOTA” do not have the word “JAKARTA”, meaning that these places are not in Jakarta:</p>
<p><img src="images/jakarta_outer_islands.png" class="img-fluid"></p>
<p>Thus, we need to remove the rows with these outer islands data:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>vacc_jakarta <span class="ot">&lt;-</span> vacc_jakarta[<span class="sc">!</span>(vacc_jakarta<span class="sc">$</span>Sub_District<span class="sc">==</span><span class="st">"PULAU HARAPAN"</span> <span class="sc">|</span> vacc_jakarta<span class="sc">$</span>Sub_District<span class="sc">==</span><span class="st">"PULAU KELAPA"</span> <span class="sc">|</span> vacc_jakarta<span class="sc">$</span>Sub_District<span class="sc">==</span><span class="st">"PULAU PANGGANG"</span> <span class="sc">|</span> vacc_jakarta<span class="sc">$</span>Sub_District<span class="sc">==</span><span class="st">"PULAU PARI"</span> <span class="sc">|</span> vacc_jakarta<span class="sc">$</span>Sub_District<span class="sc">==</span><span class="st">"PULAU TIDUNG"</span> <span class="sc">|</span> vacc_jakarta<span class="sc">$</span>Sub_District<span class="sc">==</span><span class="st">"PULAU UNTUNG JAWA"</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Re-checking for rows with NA values in <code>vacc_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>vacc_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(vacc_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Date               Sub_District_Code  Sub_District       Target            
[5] Not_Yet_Vaccinated
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>Re-checking for rows with NA values in <code>bd_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>bd_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(bd_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 9 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Projected CRS: DGN95 / Indonesia TM-3 zone 54.1
 [1] Object_ID        Village_Code     Village          Code            
 [5] Province         City             District         Sub_District    
 [9] Total_Population geometry        
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
</section>
<section id="re-joining-the-geospatial-and-aspatial-data-frames-eda" class="level3">
<h3 class="anchored" data-anchor-id="re-joining-the-geospatial-and-aspatial-data-frames-eda">4.3.3 Re-joining the geospatial and aspatial data frames + EDA</h3>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># joins vacc_jakarta to bd_jakarta based on Sub_District</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(bd_jakarta, vacc_jakarta,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"Sub_District"</span>)</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>                              )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Checking for rows with NA values in <code>combined_jakarta</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>combined_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(combined_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 13 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Projected CRS: DGN95 / Indonesia TM-3 zone 54.1
 [1] Object_ID          Village_Code       Village            Code              
 [5] Province           City               District           Sub_District      
 [9] Total_Population   Date               Sub_District_Code  Target            
[13] Not_Yet_Vaccinated geometry          
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>Visualising <code>combined_jakarta</code> again in terms of :</p>
<ul>
<li>population not yet vaccinated</li>
<li>target population to be vaccinated</li>
<li>total population</li>
</ul>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>not_yet_vaccinated <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Not_Yet_Vaccinated"</span>) <span class="sc">+</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Not Yet Vaccinated Count"</span>)</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>target <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Target"</span>) <span class="sc">+</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Target Count"</span>)</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>total_population <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_jakarta)<span class="sc">+</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Total_Population"</span>) <span class="sc">+</span></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Total Count"</span>)</span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(not_yet_vaccinated, target, total_population)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="calculation-for-vaccination-rate" class="level2">
<h2 class="anchored" data-anchor-id="calculation-for-vaccination-rate">4.4 Calculation for Vaccination Rate</h2>
<p>We need to compute the monthly vaccination rate:</p>
<ul>
<li>vaccination rate (in %) = (target - number of people not vaccinated yet) / target * 100</li>
</ul>
<p>Note: We will use “target number of people to vaccinate” instead of “total population” to calculate the vaccination rate as Indonesia excludes people age 14 and below for vaccination.</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grouping based on the sub-district and date</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the cumulative_case_rate is based on the sum of cases over the total population</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>vacc_rate <span class="ot">&lt;-</span> vacc_jakarta <span class="sc">%&gt;%</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(bd_jakarta, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Sub_District"</span> <span class="ot">=</span> <span class="st">"Sub_District"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Sub_District, Date) <span class="sc">%&gt;%</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="st">`</span><span class="at">vacc_rate</span><span class="st">`</span> <span class="ot">=</span> ((Target<span class="sc">-</span>Not_Yet_Vaccinated)<span class="sc">/</span>Target)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#afterwards, pivots the table based on the Dates, using the cumulative case rate as the values</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Date,</span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> vacc_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Show Vaccination Rate:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>vacc_rate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 261 x 13
   Sub_District  2021-~1 2021-~2 2021-~3 2021-~4 2021-~5 2021-~6 2022-~7 2022-~8
   &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 ANCOL            48.5    61.6    72.1    75.0    76.9    78.9    80.6    80.8
 2 ANGKE            52.8    64.6    74.2    77.7    79.6    80.9    81.7    81.9
 3 BALE KAMBANG     37.0    57.0    70.0    73.9    76.6    78.2    79.5    79.7
 4 BALI MESTER      47.0    62.0    74.2    78.2    80.3    81.7    82.8    83.1
 5 BAMBU APUS       47.6    64.2    76.2    80.9    82.5    83.4    84.5    84.7
 6 BANGKA           51.6    61.3    73.2    78.0    79.8    80.7    81.5    81.7
 7 BARU             57.9    67.6    79.5    82.9    84.2    85.0    85.8    86.0
 8 BATU AMPAR       39.8    58.4    70.6    74.5    77.1    78.8    80.1    80.4
 9 BENDUNGAN HI~    53.6    62.6    75.6    79.1    80.5    81.4    82.3    82.5
10 BIDARA CINA      40.6    57.6    71.0    75.2    77.0    78.2    79.2    79.5
# ... with 251 more rows, 4 more variables: `2022-03-31` &lt;dbl&gt;,
#   `2022-04-30` &lt;dbl&gt;, `2022-05-31` &lt;dbl&gt;, `2022-06-30` &lt;dbl&gt;, and abbreviated
#   variable names 1: `2021-07-31`, 2: `2021-08-31`, 3: `2021-09-30`,
#   4: `2021-10-31`, 5: `2021-11-30`, 6: `2021-12-31`, 7: `2022-01-31`,
#   8: `2022-02-27`</code></pre>
</div>
</div>
<section id="converting-dataframes-to-sf-objects" class="level3">
<h3 class="anchored" data-anchor-id="converting-dataframes-to-sf-objects">4.4.1 Converting dataframes to sf objects</h3>
<p>Before moving on to mapping, we should convert dataframes into sf objects</p>
<p>Converting <code>combined_jakarta</code> and <code>vacc_rate</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>combined_jakarta <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(combined_jakarta)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="co"># need to join our previous dataframes with the geospatial data to ensure that geometry column is present</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>vacc_rate <span class="ot">&lt;-</span> vacc_rate<span class="sc">%&gt;%</span> <span class="fu">left_join</span>(bd_jakarta, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"Sub_District"</span>))</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>vacc_rate <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(vacc_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="choropleth-mapping-and-analysis" class="level2">
<h2 class="anchored" data-anchor-id="choropleth-mapping-and-analysis">4.5 Choropleth Mapping and Analysis</h2>
<p>There are different data classifications to choropleth maps like equal intervals, quantile, Jenks and standard deviation. I have decided to use Jenks as it minimises variation in each class. It will be able to find suitable class ranges and also group outliers in a class of its own.</p>
<section id="jenks-choropleth-map" class="level3">
<h3 class="anchored" data-anchor-id="jenks-choropleth-map">4.5.1 Jenks Choropleth Map</h3>
<p>As we do not want too many classes, we will use 6 classes as it seems to be the optimum number to view different classes and we will be able to differentiate between the classes without straining our eyes.</p>
<p>Map for July 2021:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using the jenks method, with 6 classes</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(vacc_rate)<span class="sc">+</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"2021-07-31"</span>, </span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"jenks"</span>, </span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">"Vaccination Rate"</span>) <span class="sc">+</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Distribution of Vaccination Rate in July 2021"</span>,</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.5</span>, </span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Introducing a helper function to help us plot the maps for all 12 months:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># input: the dataframe and the variable name - in this case, the month </span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># with style="jenks" for the jenks classification method</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>jenks_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(df, varname) {</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(vacc_rate) <span class="sc">+</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(df) <span class="sc">+</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_fill</span>(varname, </span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"jenks"</span>, </span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">"Vaccination Rate"</span>) <span class="sc">+</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> varname,</span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">main.title.size =</span> <span class="fl">1.2</span>,</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.width =</span> <span class="fl">0.35</span>,</span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>          <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Visualising the Jenks Maps for all 12 months:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2021-07-31"</span>),</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2021-08-31"</span>),</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2021-09-30"</span>),</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2021-10-31"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2021-11-30"</span>),</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2021-12-31"</span>),</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2022-01-31"</span>),</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2022-02-27"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2022-03-31"</span>),</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2022-04-30"</span>),</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2022-05-31"</span>),</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vacc_rate, <span class="st">"2022-06-30"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="observations-from-jenks-choropleth-maps" class="level3">
<h3 class="anchored" data-anchor-id="observations-from-jenks-choropleth-maps">4.5.2 Observations from Jenks Choropleth Maps</h3>
<p>For each map, they have their own relative vaccination rate as the range for each map differs. Hence, we cannot rely on the colour scale for each map to compare between the months as it would not be fair.</p>
<p>However, we are able to compare each month individually and see that typically for each month, generically the higher vaccination rates are at the Central area and Southern area. Although there were higher vaccination rates initially at the Northern area.</p>
<p>Some other analysis can be done like the sub-district with the highest vaccination rate and the sub-district with the lowest vaccination rate for each month:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">#highest vaccination rate for each month</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-07-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KAMAL MUARA"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-08-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KAMAL MUARA"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-09-30</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-10-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-11-30</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-12-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-01-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-02-27</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-03-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-04-30</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-05-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-06-30</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HALIM PERDANA KUSUMAH"</code></pre>
</div>
</div>
<p>From this, we can tell that the sub-district “KAMAL MUARA” had the highest vaccination rate initially from July 2021 to August 2021 but thereafter, “HALIM PERDANA KUSMAH” consistently had the highest vaccination rate from September 2021 to June 2022.</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co">#lowest vaccination rate for each month</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-07-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "BALE KAMBANG"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-08-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PETAMBURAN"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-09-30</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KALIBARU"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-10-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KALIBARU"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-11-30</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KALIBARU"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2021-12-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KEBON MELATI"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-01-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KALIBARU"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-02-27</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KEBON MELATI"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-03-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KEBON MELATI"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-04-30</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KEBON MELATI"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-05-31</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KEBON MELATI"</code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>vacc_rate<span class="sc">$</span>Sub_District[<span class="fu">which.min</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-06-30</span><span class="st">`</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KEBON MELATI"</code></pre>
</div>
</div>
<p>From this, we can tell that initially the sub-district “BALE KAMBANG” had the lowest vaccination rate in July 2021, and “PETAMBURAN” was the sub-district with the lowest vaccination rate in August 2021. But their vaccination rates improved over the months such that “KALIBARU” was identified as the sub-district with the lowest vaccination rate from September 2021 to January 2022 with the exception of December 2021. Then, “KEBON MELATI” became the sub-district with the lowest vaccination rate from December 2021 to June 2022 with the exception of January 2022.</p>
</section>
<section id="spatio-temporal-mapping-with-custom-breakpoints" class="level3">
<h3 class="anchored" data-anchor-id="spatio-temporal-mapping-with-custom-breakpoints">4.5.3 Spatio-Temporal Mapping with custom breakpoints</h3>
<p>In the above section, each month had their own vaccination rate. To compare with the vaccination rate between months and see the spatio-temporal progression of the vaccination rates, we should set a fixed range.</p>
<p>To do so, we have to customise the breakpoints and following the above section, we will define 6 breakpoints.</p>
<p>First, we require the maximum vaccination rate which would be from the latest month (June 2022):</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(vacc_rate<span class="sc">$</span><span class="st">`</span><span class="at">2022-06-30</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 89.77894</code></pre>
</div>
</div>
<p>Now, we can define the 6 breakpoints based on the Jenks breaks ranges from the above section:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>breakpoints <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">37</span>, <span class="dv">55</span>, <span class="dv">72</span>, <span class="dv">80</span>, <span class="dv">84</span>, <span class="dv">90</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Creating a helper function for break plot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>break_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(df, varname) {</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(vacc_rate) <span class="sc">+</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(df) <span class="sc">+</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_fill</span>(varname, </span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">breaks=</span> breakpoints,</span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">"Vaccination Rate"</span>) <span class="sc">+</span></span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> varname,</span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">main.title.size =</span> <span class="fl">1.2</span>,</span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb151-12"><a href="#cb151-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.width =</span> <span class="fl">0.35</span>,</span>
<span id="cb151-13"><a href="#cb151-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb151-14"><a href="#cb151-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb151-15"><a href="#cb151-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Plotting the custom break plots for each month:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">break_plot</span>(vacc_rate, <span class="st">"2021-07-31"</span>),</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2021-08-31"</span>),</span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2021-09-30"</span>),</span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2021-10-31"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">break_plot</span>(vacc_rate, <span class="st">"2021-11-30"</span>),</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2021-12-31"</span>),</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2022-01-31"</span>),</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2022-02-27"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">break_plot</span>(vacc_rate, <span class="st">"2022-03-31"</span>),</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2022-04-30"</span>),</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2022-05-31"</span>),</span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">break_plot</span>(vacc_rate, <span class="st">"2022-06-30"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="observations-from-custom-breakplot-maps" class="level3">
<h3 class="anchored" data-anchor-id="observations-from-custom-breakplot-maps">4.5.4 Observations from Custom Breakplot Maps</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ezgif.com-gif-maker (1).gif" class="img-fluid figure-img"></p>
</figure>
</div>
<p>At the start, in July 2021, there is a slightly higher vaccination rate at the Northern and Central area compared to the other areas given its slightly darker shade of yellow.</p>
<p>However as time passes, from August 2021 to October 2021, the increase in the vaccination rate becomes greater at the Northern Central area and Southern area.</p>
<p>Specifically sub-district “HALIM PERDANA KUSUMAH” is obvious to the eye with its consistently high rate and darker shade at the Eastern border.</p>
<p>From November 2021 to February 2022, the increase in vaccination rate is faster at the Southern area and the Northern Central Area.</p>
<p>(Supplementing the previous observations in section 4.5.2, the general increasing trend happens at the Southern and Central area.)</p>
<p>From March 2022 to June 2022, we can see the sub-districts at the Northern Central area as well as some sub-districts near the Eastern border increasing their vaccination rates.</p>
</section>
</section>
<section id="local-gi-analysis" class="level2">
<h2 class="anchored" data-anchor-id="local-gi-analysis">4.6 Local Gi* Analysis</h2>
<section id="computing-local-gi-values-of-the-monthly-vaccination-rate" class="level3">
<h3 class="anchored" data-anchor-id="computing-local-gi-values-of-the-monthly-vaccination-rate">4.6.1 Computing local Gi* values of the monthly vaccination rate</h3>
<p>To create a time series cube, we first have to make an attribute table with the data organised in the following format: Date, Location (<code>Sub_District</code>) and Value (<code>Vaccination_Rate</code>)</p>
<p>Making an attribute table:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make new vaccination attribute table with Date, Sub_District, Target, Not_Yet_Vaccinated</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>vacc_attribute_table <span class="ot">&lt;-</span> combined_jakarta <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">13</span>) <span class="sc">%&gt;%</span> <span class="fu">st_drop_geometry</span>()</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="co"># add a new field for Vaccination_Rate</span></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>vacc_attribute_table<span class="sc">$</span>Vaccination_Rate <span class="ot">&lt;-</span> (vacc_attribute_table<span class="sc">$</span>Target <span class="sc">-</span> vacc_attribute_table<span class="sc">$</span>Not_Yet_Vaccinated) <span class="sc">/</span> vacc_attribute_table<span class="sc">$</span>Target<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="co"># final vaccination attribute table with Date, Sub_District, Vaccination_Rate</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>vacc_attribute_table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(vacc_attribute_table <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Display attribute table details:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>vacc_attribute_table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,132 x 3
   Date       Sub_District Vaccination_Rate
   &lt;date&gt;     &lt;chr&gt;                   &lt;dbl&gt;
 1 2022-02-27 KEAGUNGAN                84.2
 2 2022-04-30 KEAGUNGAN                85.1
 3 2022-06-30 KEAGUNGAN                85.3
 4 2021-11-30 KEAGUNGAN                82.2
 5 2021-09-30 KEAGUNGAN                75.8
 6 2021-08-31 KEAGUNGAN                65.2
 7 2021-12-31 KEAGUNGAN                83.2
 8 2022-01-31 KEAGUNGAN                84.0
 9 2021-07-31 KEAGUNGAN                53.3
10 2022-03-31 KEAGUNGAN                84.6
# ... with 3,122 more rows</code></pre>
</div>
</div>
<p>Creating a time series cube (spatio-temporal cube) using <code>spacetime()</code> of sfdep package:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>vacc_rate_st <span class="ot">&lt;-</span> <span class="fu">spacetime</span>(vacc_attribute_table, bd_jakarta,</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.loc_col =</span> <span class="st">"Sub_District"</span>,</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.time_col =</span> <span class="st">"Date"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, we can check if <code>vacc_rate_st</code> is indeed a space-time cube object using <code>is_spacetime_cube()</code> of sfdep package:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_spacetime_cube</span>(vacc_rate_st)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>The output shows ‘TRUE’, confirming that <code>vacc_rate_st</code> is a space-time cube.</p>
<p>To compute the local Gi* statistics, we need to derive the spatial weights first:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>vacc_rate_nb <span class="ot">&lt;-</span> vacc_rate_st <span class="sc">%&gt;%</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">"geometry"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nb =</span> <span class="fu">include_self</span>(<span class="fu">st_contiguity</span>(geometry)),</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">wt =</span> <span class="fu">st_inverse_distance</span>(nb, geometry,</span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">scale=</span><span class="dv">1</span>,</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">alpha=</span><span class="dv">1</span>),</span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_nbs</span>(<span class="st">"nb"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_wts</span>(<span class="st">"wt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The above code does the following:</p>
<ul>
<li>identify neighbours</li>
<li>derive inverse distance weights</li>
<li><code>activate()</code> of dplyr package is used to activate the geometry context</li>
<li><code>mutate()</code> of dplyr package is used to create two new columns nb and wt.</li>
<li>Then we will activate the data context again and copy over the nb and wt columns to each time-slice using <code>set_nbs()</code> and <code>set_wts()</code></li>
<li>row order is very important so do not rearrange the observations after using <code>set_nbs()</code> or <code>set_wts()</code>.</li>
</ul>
<p>The dataset now has neighbours and weights for each time-slice:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vacc_rate_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 5
  Date       Sub_District  Vaccination_Rate nb        wt       
  &lt;date&gt;     &lt;chr&gt;                    &lt;dbl&gt; &lt;list&gt;    &lt;list&gt;   
1 2021-07-31 KEAGUNGAN                 53.3 &lt;int [6]&gt; &lt;dbl [6]&gt;
2 2021-07-31 GLODOK                    61.6 &lt;int [7]&gt; &lt;dbl [7]&gt;
3 2021-07-31 HARAPAN MULIA             49.7 &lt;int [6]&gt; &lt;dbl [6]&gt;
4 2021-07-31 CEMPAKA BARU              46.7 &lt;int [7]&gt; &lt;dbl [7]&gt;
5 2021-07-31 PASAR BARU                59.3 &lt;int [9]&gt; &lt;dbl [9]&gt;
6 2021-07-31 KARANG ANYAR              52.2 &lt;int [7]&gt; &lt;dbl [7]&gt;</code></pre>
</div>
</div>
<p>Before computing Gi*, we will set the seed value so that the results of the simulations will be reproducible and constant:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Computing Gi* for each location, grouping by Date and using <code>local_gstar_perm()</code> of sfdep package:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>gi_stars <span class="ot">&lt;-</span> vacc_rate_nb <span class="sc">|&gt;</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Date) <span class="sc">|&gt;</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gi_star =</span> <span class="fu">local_gstar_perm</span>(</span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>    Vaccination_Rate, nb, wt, <span class="at">nsim=</span><span class="dv">99</span>)) <span class="sc">|&gt;</span></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>      tidyr<span class="sc">::</span><span class="fu">unnest</span>(gi_star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Note: <code>unnest()</code> will unnest the <code>gi_star</code> column</p>
<p>Taking a look at the newly created <code>gi_stars</code> dataframe:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>gi_stars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,132 x 13
# Groups:   Date [12]
   Date       Sub_Di~1 Vacci~2 nb    wt    gi_star    e_gi  var_gi p_value p_sim
   &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt; &lt;lis&gt; &lt;lis&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1 2021-07-31 KEAGUNG~    53.3 &lt;int&gt; &lt;dbl&gt;   2.44  0.00383 2.13e-8 1.46e-2  0.02
 2 2021-07-31 GLODOK      61.6 &lt;int&gt; &lt;dbl&gt;   3.85  0.00384 1.56e-8 1.18e-4  0.02
 3 2021-07-31 HARAPAN~    49.7 &lt;int&gt; &lt;dbl&gt;   0.309 0.00382 2.20e-8 7.57e-1  0.84
 4 2021-07-31 CEMPAKA~    46.7 &lt;int&gt; &lt;dbl&gt;  -1.05  0.00383 1.53e-8 2.96e-1  0.34
 5 2021-07-31 PASAR B~    59.3 &lt;int&gt; &lt;dbl&gt;   2.71  0.00383 1.38e-8 6.82e-3  0.02
 6 2021-07-31 KARANG ~    52.2 &lt;int&gt; &lt;dbl&gt;   1.67  0.00382 2.17e-8 9.49e-2  0.1 
 7 2021-07-31 MANGGA ~    51.6 &lt;int&gt; &lt;dbl&gt;   1.35  0.00384 1.80e-8 1.77e-1  0.22
 8 2021-07-31 PETOJO ~    47.2 &lt;int&gt; &lt;dbl&gt;  -0.179 0.00382 1.92e-8 8.58e-1  0.96
 9 2021-07-31 SENEN       54.4 &lt;int&gt; &lt;dbl&gt;   1.51  0.00382 1.20e-8 1.32e-1  0.1 
10 2021-07-31 BUNGUR      52.8 &lt;int&gt; &lt;dbl&gt;   0.797 0.00385 1.54e-8 4.25e-1  0.48
# ... with 3,122 more rows, 3 more variables: p_folded_sim &lt;dbl&gt;,
#   skewness &lt;dbl&gt;, kurtosis &lt;dbl&gt;, and abbreviated variable names
#   1: Sub_District, 2: Vaccination_Rate</code></pre>
</div>
</div>
</section>
<section id="displaying-the-gi-maps-of-the-monthly-vaccination-rate" class="level3">
<h3 class="anchored" data-anchor-id="displaying-the-gi-maps-of-the-monthly-vaccination-rate">4.6.2 Displaying the Gi* maps of the monthly vaccination rate</h3>
<p>Before we can visualise the Gi* values using maps, we need to join both <code>combined_jakarta</code> and <code>gi_stars</code> together:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>combined_jakarta_gi_stars <span class="ot">&lt;-</span> combined_jakarta <span class="sc">%&gt;%</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gi_stars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Taking a look at <code>combined_jakarta_gi_stars</code>:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>combined_jakarta_gi_stars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 3132 features and 24 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -3644275 ymin: 663887.8 xmax: -3606237 ymax: 701380.1
Projected CRS: DGN95 / Indonesia TM-3 zone 54.1
First 10 features:
   Object_ID Village_Code   Village   Code    Province          City   District
1      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
2      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
3      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
4      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
5      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
6      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
7      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
8      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
9      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
10     25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI
   Sub_District Total_Population       Date Sub_District_Code Target
1     KEAGUNGAN            21609 2022-02-27        3173031006  17387
2     KEAGUNGAN            21609 2022-04-30        3173031006  17387
3     KEAGUNGAN            21609 2022-06-30        3173031006  17387
4     KEAGUNGAN            21609 2021-11-30        3173031006  17387
5     KEAGUNGAN            21609 2021-09-30        3173031006  17387
6     KEAGUNGAN            21609 2021-08-31        3173031006  17387
7     KEAGUNGAN            21609 2021-12-31        3173031006  17387
8     KEAGUNGAN            21609 2022-01-31        3173031006  17387
9     KEAGUNGAN            21609 2021-07-31        3173031006  17387
10    KEAGUNGAN            21609 2022-03-31        3173031006  17387
   Not_Yet_Vaccinated Vaccination_Rate                      nb
1                2755         84.15483 1, 2, 39, 152, 158, 166
2                2593         85.08656 1, 2, 39, 152, 158, 166
3                2553         85.31662 1, 2, 39, 152, 158, 166
4                3099         82.17634 1, 2, 39, 152, 158, 166
5                4203         75.82677 1, 2, 39, 152, 158, 166
6                6054         65.18088 1, 2, 39, 152, 158, 166
7                2924         83.18284 1, 2, 39, 152, 158, 166
8                2783         83.99379 1, 2, 39, 152, 158, 166
9                8126         53.26393 1, 2, 39, 152, 158, 166
10               2675         84.61494 1, 2, 39, 152, 158, 166
                                                                             wt
1  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
2  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
3  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
4  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
5  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
6  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
7  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
8  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
9  0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
10 0.000000000, 0.001071983, 0.001039284, 0.001417870, 0.001110612, 0.001297268
    gi_star        e_gi       var_gi     p_value p_sim p_folded_sim    skewness
1  2.478859 0.003831172 8.419778e-10 0.013180341  0.02         0.01 -0.03194341
2  2.825027 0.003827108 7.494269e-10 0.004727670  0.04         0.02 -0.06356613
3  2.856078 0.003828377 6.980492e-10 0.004289104  0.02         0.01  0.09797571
4  2.400280 0.003831389 1.665572e-09 0.016382514  0.02         0.01 -0.75383323
5  2.340497 0.003839767 1.969413e-09 0.019258078  0.02         0.01 -0.45706127
6  2.697283 0.003843766 4.229906e-09 0.006990777  0.02         0.01  0.19649652
7  2.737341 0.003831004 9.440138e-10 0.006193804  0.02         0.01 -0.13372915
8  2.601179 0.003833862 7.779184e-10 0.009290410  0.02         0.01 -0.51408533
9  2.442508 0.003830045 2.133669e-08 0.014585591  0.02         0.01 -0.40723702
10 2.631489 0.003829259 7.973859e-10 0.008501151  0.04         0.02  0.23980167
      kurtosis                       geometry
1  -0.81316154 MULTIPOLYGON (((-3626874 69...
2   0.55021722 MULTIPOLYGON (((-3626874 69...
3  -0.50749002 MULTIPOLYGON (((-3626874 69...
4   0.54499553 MULTIPOLYGON (((-3626874 69...
5   0.28836755 MULTIPOLYGON (((-3626874 69...
6   0.03187466 MULTIPOLYGON (((-3626874 69...
7  -0.02562365 MULTIPOLYGON (((-3626874 69...
8   0.07882560 MULTIPOLYGON (((-3626874 69...
9   0.28865884 MULTIPOLYGON (((-3626874 69...
10 -0.20275849 MULTIPOLYGON (((-3626874 69...</code></pre>
</div>
</div>
<p>Visualising Gi* and p-value of Gi* (only significant locations where p-value &lt; 0.05) for vaccination rates in July 2021:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>gi_star_map <span class="ot">=</span> <span class="fu">tm_shape</span>(<span class="fu">filter</span>(combined_jakarta_gi_stars, Date <span class="sc">==</span> <span class="st">'2021-07-31'</span>)) <span class="sc">+</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Gi* values for vaccination rates in July 2021"</span>, <span class="at">main.title.size=</span><span class="fl">0.8</span>)</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tm_view(set.zoom.limits = c(10,16))</span></span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>p_sim_map <span class="ot">=</span> <span class="fu">tm_shape</span>(<span class="fu">filter</span>(combined_jakarta_gi_stars, Date <span class="sc">==</span> <span class="st">'2021-07-31'</span>)) <span class="sc">+</span></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"p_sim"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"p-values of Gi* for vaccination rates in July 2021"</span>, <span class="at">main.title.size=</span><span class="fl">0.8</span>)</span>
<span id="cb171-12"><a href="#cb171-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tm_view(set.zoom.limits = c(10,16))</span></span>
<span id="cb171-13"><a href="#cb171-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-14"><a href="#cb171-14" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(gi_star_map, p_sim_map)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Introducing a helper function to help us plot the Gi* and p-value of Gi* maps for all 12 months:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>gi_star_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(date, month) {</span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>  gi_star_map <span class="ot">=</span> <span class="fu">tm_shape</span>(<span class="fu">filter</span>(combined_jakarta_gi_stars, Date <span class="sc">==</span> date)) <span class="sc">+</span></span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_fill</span>(<span class="st">"gi_star"</span>) <span class="sc">+</span></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="fu">paste</span>(<span class="st">"Gi* values for vaccination rates in"</span>, month), <span class="at">main.title.size=</span><span class="fl">0.8</span>)</span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-7"><a href="#cb172-7" aria-hidden="true" tabindex="-1"></a>  p_sim_map <span class="ot">=</span> <span class="fu">tm_shape</span>(<span class="fu">filter</span>(combined_jakarta_gi_stars, Date <span class="sc">==</span> date)) <span class="sc">+</span></span>
<span id="cb172-8"><a href="#cb172-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_fill</span>(<span class="st">"p_sim"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb172-9"><a href="#cb172-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb172-10"><a href="#cb172-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="fu">paste</span>(<span class="st">"p-values of Gi* for vaccination rates in"</span>, month), <span class="at">main.title.size=</span><span class="fl">0.8</span>)</span>
<span id="cb172-11"><a href="#cb172-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-12"><a href="#cb172-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tmap_arrange</span>(gi_star_map, p_sim_map)</span>
<span id="cb172-13"><a href="#cb172-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2021-07-31"</span>, <span class="st">"July 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2021-08-31"</span>, <span class="st">"August 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2021-09-30"</span>, <span class="st">"September 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2021-10-31"</span>, <span class="st">"October 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-4.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2021-11-30"</span>, <span class="st">"November 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-5.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2021-12-31"</span>, <span class="st">"December 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-6.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2022-01-31"</span>, <span class="st">"January 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-7.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2022-02-27"</span>, <span class="st">"February 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-8.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2022-03-31"</span>, <span class="st">"March 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-9.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2022-04-30"</span>, <span class="st">"April 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-10.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2022-05-31"</span>, <span class="st">"May 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-11.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gi_star_plot</span>(<span class="st">"2022-06-30"</span>, <span class="st">"June 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-75-12.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Locations with p-value of Gi* &lt; 0.05 in July 2021:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>july_details <span class="ot">=</span> <span class="fu">filter</span>(combined_jakarta_gi_stars, Date <span class="sc">==</span> <span class="st">'2021-07-31'</span> <span class="sc">&amp;</span> p_sim<span class="sc">&lt;</span><span class="fl">0.05</span>)</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>july_details<span class="sc">$</span>Sub_District</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"              "GLODOK"                 "PASAR BARU"            
 [4] "PETAMBURAN"             "KEBON MELATI"           "KAMPUNG RAWA"          
 [7] "ANCOL"                  "KELAPA GADING TIMUR"    "MANGGA BESAR"          
[10] "SUKABUMI UTARA"         "SUKABUMI SELATAN"       "KELAPA DUA"            
[13] "RAWA BUNGA"             "SRENGSENG"              "PEJATEN TIMUR"         
[16] "CIPULIR"                "PISANGAN BARU"          "JATINEGARA KAUM"       
[19] "CIPINANG MUARA"         "CIPINANG BESAR SELATAN" "CIPINANG BESAR UTARA"  
[22] "KAMPUNG TENGAH"         "BALE KAMBANG"           "CILILITAN"             
[25] "KLENDER"                "PONDOK KOPI"            "PISANGAN TIMUR"        
[28] "GUNUNG SAHARI SELATAN"  "GUNUNG SAHARI UTARA"    "KEBON KACANG"          
[31] "KAMPUNG BALI"           "GALUR"                  "TANAH TINGGI"          
[34] "KAPUK MUARA"            "SUNTER JAYA"            "PEGANGSAAN DUA"        
[37] "KELAPA GADING BARAT"    "MAPHAR"                 "TANGKI"                
[40] "TOMANG"                 "PINANGSIA"              "CIPINANG CEMPEDAK"     
[43] "MELAWAI"                "SELONG"                 "RAWA BARAT"            
[46] "PETOGOGAN"              "KAMPUNG MELAYU"         "BIDARA CINA"           
[49] "BALI MESTER"            "KRAMAT JATI"            "BATU AMPAR"            
[52] "GEDONG"                 "JATINEGARA"             "PONDOK BAMBU"          
[55] "RAMBUTAN"              </code></pre>
</div>
</div>
<p>Introducing a helper function to help us discover the Sub-Districts with p-value of Gi* &lt; 0.05 for all 12 months:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>get_significant_locations <span class="ot">&lt;-</span> <span class="cf">function</span>(date, month) {</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Sub-Districts with p-value of Gi* &lt; 0.05 in"</span>, month))</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(combined_jakarta_gi_stars, Date <span class="sc">==</span> date <span class="sc">&amp;</span> p_sim<span class="sc">&lt;</span><span class="fl">0.05</span>)<span class="sc">$</span>Sub_District</span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-07-31"</span>, <span class="st">"July 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in July 2021"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"              "GLODOK"                 "PASAR BARU"            
 [4] "PETAMBURAN"             "KEBON MELATI"           "KAMPUNG RAWA"          
 [7] "ANCOL"                  "KELAPA GADING TIMUR"    "MANGGA BESAR"          
[10] "SUKABUMI UTARA"         "SUKABUMI SELATAN"       "KELAPA DUA"            
[13] "RAWA BUNGA"             "SRENGSENG"              "PEJATEN TIMUR"         
[16] "CIPULIR"                "PISANGAN BARU"          "JATINEGARA KAUM"       
[19] "CIPINANG MUARA"         "CIPINANG BESAR SELATAN" "CIPINANG BESAR UTARA"  
[22] "KAMPUNG TENGAH"         "BALE KAMBANG"           "CILILITAN"             
[25] "KLENDER"                "PONDOK KOPI"            "PISANGAN TIMUR"        
[28] "GUNUNG SAHARI SELATAN"  "GUNUNG SAHARI UTARA"    "KEBON KACANG"          
[31] "KAMPUNG BALI"           "GALUR"                  "TANAH TINGGI"          
[34] "KAPUK MUARA"            "SUNTER JAYA"            "PEGANGSAAN DUA"        
[37] "KELAPA GADING BARAT"    "MAPHAR"                 "TANGKI"                
[40] "TOMANG"                 "PINANGSIA"              "CIPINANG CEMPEDAK"     
[43] "MELAWAI"                "SELONG"                 "RAWA BARAT"            
[46] "PETOGOGAN"              "KAMPUNG MELAYU"         "BIDARA CINA"           
[49] "BALI MESTER"            "KRAMAT JATI"            "BATU AMPAR"            
[52] "GEDONG"                 "JATINEGARA"             "PONDOK BAMBU"          
[55] "RAMBUTAN"              </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-08-31"</span>, <span class="st">"August 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in August 2021"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"              "GLODOK"                 "PASAR BARU"            
 [4] "PETAMBURAN"             "KEBON MELATI"           "KAMPUNG RAWA"          
 [7] "KAMAL MUARA"            "PAPANGGO"               "KELAPA GADING TIMUR"   
[10] "MANGGA BESAR"           "SUKABUMI UTARA"         "SUKABUMI SELATAN"      
[13] "KELAPA DUA"             "RAWA BUNGA"             "PEJATEN TIMUR"         
[16] "CIPULIR"                "GROGOL SELATAN"         "PISANGAN BARU"         
[19] "CIPINANG MUARA"         "CIPINANG BESAR SELATAN" "CIPINANG BESAR UTARA"  
[22] "KAMPUNG TENGAH"         "BALE KAMBANG"           "CILILITAN"             
[25] "DUREN SAWIT"            "KLENDER"                "PONDOK KOPI"           
[28] "CEMPAKA PUTIH BARAT"    "BENDUNGAN HILIR"        "KEBON KACANG"          
[31] "KAMPUNG BALI"           "JOHAR BARU"             "GALUR"                 
[34] "TANAH TINGGI"           "KAPUK MUARA"            "SUNTER JAYA"           
[37] "SUNTER AGUNG"           "PEGANGSAAN DUA"         "MAPHAR"                
[40] "PINANGSIA"              "TANAH SEREAL"           "ROA MALAKA"            
[43] "DURI SELATAN"           "CIPINANG CEMPEDAK"      "GROGOL UTARA"          
[46] "PETUKANGAN UTARA"       "PULO GADUNG"            "ULUJAMI"               
[49] "KAYU MANIS"             "PAL MERIAM"             "KAMPUNG MELAYU"        
[52] "BIDARA CINA"            "BALI MESTER"            "BATU AMPAR"            
[55] "CIJANTUNG"              "PENGGILINGAN"           "PONDOK BAMBU"          
[58] "MALAKA SARI"            "HALIM PERDANA KUSUMAH"  "CIBUBUR"               
[61] "KELAPA DUA WETAN"      </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-09-30"</span>, <span class="st">"September 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in September 2021"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "PETAMBURAN"           
 [4] "KEBON MELATI"          "KAMPUNG RAWA"          "TUGU UTARA"           
 [7] "LAGOA"                 "KOJA"                  "CILINCING"            
[10] "KALIBARU"              "KELAPA GADING TIMUR"   "MANGGA BESAR"         
[13] "SUKABUMI UTARA"        "SUKABUMI SELATAN"      "KELAPA DUA"           
[16] "RAWA BUNGA"            "PEJATEN TIMUR"         "CIPEDAK"              
[19] "CIPINANG BESAR UTARA"  "KAMPUNG TENGAH"        "BALE KAMBANG"         
[22] "CILILITAN"             "RAWA BADAK UTARA"      "KEBON KACANG"         
[25] "KAMPUNG BALI"          "SEMPER TIMUR"          "PEGANGSAAN DUA"       
[28] "KELAPA GADING BARAT"   "TANGKI"                "PINANGSIA"            
[31] "TEBET BARAT"           "TEBET TIMUR"           "CIPINANG CEMPEDAK"    
[34] "MELAWAI"               "SELONG"                "PETOGOGAN"            
[37] "CIGANJUR"              "PULO GADUNG"           "KAMPUNG MELAYU"       
[40] "BIDARA CINA"           "BALI MESTER"           "KRAMAT JATI"          
[43] "BATU AMPAR"            "GEDONG"                "CIJANTUNG"            
[46] "PONDOK BAMBU"          "HALIM PERDANA KUSUMAH" "KELAPA DUA WETAN"     
[49] "MUNJUL"               </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-10-31"</span>, <span class="st">"October 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in October 2021"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "PETAMBURAN"           
 [4] "KEBON MELATI"          "TUGU UTARA"            "LAGOA"                
 [7] "KOJA"                  "CILINCING"             "KALIBARU"             
[10] "SEMPER BARAT"          "KELAPA GADING TIMUR"   "MANGGA BESAR"         
[13] "SUKABUMI SELATAN"      "RAWA BUNGA"            "MANGGARAI SELATAN"    
[16] "PONDOK LABU"           "LENTENG AGUNG"         "JAGAKARSA"            
[19] "CIPEDAK"               "CIPINANG BESAR UTARA"  "KAMPUNG TENGAH"       
[22] "BALE KAMBANG"          "KALISARI"              "CIPAYUNG"             
[25] "RAWA BADAK UTARA"      "BENDUNGAN HILIR"       "KEBON KACANG"         
[28] "KAMPUNG BALI"          "MAPHAR"                "TANGKI"               
[31] "JEMBATAN LIMA"         "TEBET BARAT"           "TEBET TIMUR"          
[34] "CIPINANG CEMPEDAK"     "CILANDAK BARAT"        "SRENGSENG SAWAH"      
[37] "CIGANJUR"              "BIDARA CINA"           "BATU AMPAR"           
[40] "GEDONG"                "BARU"                  "CIJANTUNG"            
[43] "PEKAYON"               "HALIM PERDANA KUSUMAH" "CIBUBUR"              
[46] "KELAPA DUA WETAN"      "MUNJUL"                "LUBANG BUAYA"         </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-11-30"</span>, <span class="st">"November 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in November 2021"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"              "GLODOK"                 "PETAMBURAN"            
 [4] "KEBON MELATI"           "TUGU UTARA"             "LAGOA"                 
 [7] "RAWA BADAK SELATAN"     "CILINCING"              "KALIBARU"              
[10] "SEMPER BARAT"           "KELAPA GADING TIMUR"    "MANGGA BESAR"          
[13] "RAWA BUNGA"             "MANGGARAI SELATAN"      "RAGUNAN"               
[16] "PONDOK LABU"            "LENTENG AGUNG"          "JAGAKARSA"             
[19] "CIPEDAK"                "CIPINANG BESAR SELATAN" "CIPINANG BESAR UTARA"  
[22] "KAMPUNG TENGAH"         "BALE KAMBANG"           "KALISARI"              
[25] "RAWA BADAK UTARA"       "PETOJO SELATAN"         "BENDUNGAN HILIR"       
[28] "KEBON KACANG"           "KAMPUNG BALI"           "SUNTER JAYA"           
[31] "SEMPER TIMUR"           "TANGKI"                 "TEBET BARAT"           
[34] "TEBET TIMUR"            "CIPINANG CEMPEDAK"      "CILANDAK TIMUR"        
[37] "CIKOKO"                 "SRENGSENG SAWAH"        "CIGANJUR"              
[40] "BIDARA CINA"            "BALI MESTER"            "KRAMAT JATI"           
[43] "BATU AMPAR"             "BARU"                   "CIJANTUNG"             
[46] "HALIM PERDANA KUSUMAH"  "CIBUBUR"                "KELAPA DUA WETAN"      
[49] "MUNJUL"                </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2021-12-31"</span>, <span class="st">"December 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in December 2021"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "MENTENG"              
 [4] "PETAMBURAN"            "KEBON MELATI"          "TUGU UTARA"           
 [7] "LAGOA"                 "CILINCING"             "KALIBARU"             
[10] "SEMPER BARAT"          "KELAPA GADING TIMUR"   "MANGGA BESAR"         
[13] "RAWA BUNGA"            "MANGGARAI SELATAN"     "PASAR MANGGIS"        
[16] "RAGUNAN"               "KEBAGUSAN"             "PONDOK LABU"          
[19] "LENTENG AGUNG"         "JAGAKARSA"             "CIPEDAK"              
[22] "KAMPUNG TENGAH"        "BALE KAMBANG"          "KALISARI"             
[25] "CIPAYUNG"              "RAWA BADAK UTARA"      "PETOJO SELATAN"       
[28] "GONDANGDIA"            "KEBON SIRIH"           "GELORA"               
[31] "BENDUNGAN HILIR"       "KEBON KACANG"          "KAMPUNG BALI"         
[34] "PENJARINGAN"           "SUNTER JAYA"           "MARUNDA"              
[37] "TANGKI"                "TANAH SEREAL"          "TEBET BARAT"          
[40] "TEBET TIMUR"           "CIPINANG CEMPEDAK"     "CILANDAK TIMUR"       
[43] "CIKOKO"                "SRENGSENG SAWAH"       "CIGANJUR"             
[46] "TANJUNG BARAT"         "BIDARA CINA"           "BATU AMPAR"           
[49] "BARU"                  "PEKAYON"               "HALIM PERDANA KUSUMAH"
[52] "CIBUBUR"               "KELAPA DUA WETAN"     </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-01-31"</span>, <span class="st">"January 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in January 2022"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "MENTENG"              
 [4] "PETAMBURAN"            "KEBON MELATI"          "LAGOA"                
 [7] "CILINCING"             "KALIBARU"              "SEMPER BARAT"         
[10] "KELAPA GADING TIMUR"   "MANGGA BESAR"          "RAWA BUNGA"           
[13] "MANGGARAI SELATAN"     "RAGUNAN"               "KEBAGUSAN"            
[16] "PONDOK LABU"           "LENTENG AGUNG"         "JAGAKARSA"            
[19] "CIPEDAK"               "CIPINANG BESAR UTARA"  "KAMPUNG TENGAH"       
[22] "KALISARI"              "CIPAYUNG"              "GAMBIR"               
[25] "PETOJO SELATAN"        "KRAMAT"                "GONDANGDIA"           
[28] "KEBON SIRIH"           "GELORA"                "BENDUNGAN HILIR"      
[31] "KEBON KACANG"          "KAMPUNG BALI"          "PENJARINGAN"          
[34] "SEMPER TIMUR"          "TANGKI"                "TEBET BARAT"          
[37] "TEBET TIMUR"           "CIPINANG CEMPEDAK"     "CILANDAK TIMUR"       
[40] "CILANDAK BARAT"        "CIKOKO"                "SRENGSENG SAWAH"      
[43] "CIGANJUR"              "BATU AMPAR"            "BARU"                 
[46] "CIJANTUNG"             "PEKAYON"               "MALAKA JAYA"          
[49] "HALIM PERDANA KUSUMAH" "CIBUBUR"               "KELAPA DUA WETAN"     
[52] "MUNJUL"                "LUBANG BUAYA"         </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-02-27"</span>, <span class="st">"February 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in February 2022"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "MENTENG"              
 [4] "PETAMBURAN"            "KEBON MELATI"          "TUGU UTARA"           
 [7] "LAGOA"                 "CILINCING"             "KALIBARU"             
[10] "MANGGA BESAR"          "MANGGARAI SELATAN"     "RAGUNAN"              
[13] "SENAYAN"               "PONDOK LABU"           "LENTENG AGUNG"        
[16] "JAGAKARSA"             "CIPEDAK"               "KAMPUNG TENGAH"       
[19] "BALE KAMBANG"          "KALISARI"              "GAMBIR"               
[22] "PETOJO SELATAN"        "KRAMAT"                "GONDANGDIA"           
[25] "KEBON SIRIH"           "GELORA"                "BENDUNGAN HILIR"      
[28] "KARET TENGSIN"         "KEBON KACANG"          "KAMPUNG BALI"         
[31] "SEMPER TIMUR"          "TANGKI"                "TEBET BARAT"          
[34] "TEBET TIMUR"           "CIPINANG CEMPEDAK"     "CILANDAK TIMUR"       
[37] "CIKOKO"                "SRENGSENG SAWAH"       "CIGANJUR"             
[40] "TANJUNG BARAT"         "BIDARA CINA"           "BATU AMPAR"           
[43] "BARU"                  "CIJANTUNG"             "PEKAYON"              
[46] "MALAKA JAYA"           "HALIM PERDANA KUSUMAH" "CIBUBUR"              
[49] "KELAPA DUA WETAN"      "MUNJUL"                "LUBANG BUAYA"         </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-03-31"</span>, <span class="st">"March 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in March 2022"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "SENEN"                
 [4] "MENTENG"               "CIKINI"                "PETAMBURAN"           
 [7] "KEBON MELATI"          "LAGOA"                 "CILINCING"            
[10] "KALIBARU"              "MANGGA BESAR"          "RAWA BUNGA"           
[13] "RAGUNAN"               "KEBAGUSAN"             "PONDOK LABU"          
[16] "LENTENG AGUNG"         "JAGAKARSA"             "CIPEDAK"              
[19] "CIPINANG BESAR UTARA"  "KAMPUNG TENGAH"        "BALE KAMBANG"         
[22] "KALISARI"              "GAMBIR"                "PETOJO SELATAN"       
[25] "GONDANGDIA"            "KEBON SIRIH"           "GELORA"               
[28] "BENDUNGAN HILIR"       "KARET TENGSIN"         "KEBON KACANG"         
[31] "KAMPUNG BALI"          "TANAH SEREAL"          "TEBET BARAT"          
[34] "TEBET TIMUR"           "CIPINANG CEMPEDAK"     "CILANDAK TIMUR"       
[37] "CILANDAK BARAT"        "CIKOKO"                "SRENGSENG SAWAH"      
[40] "CIGANJUR"              "TANJUNG BARAT"         "BIDARA CINA"          
[43] "BATU AMPAR"            "BARU"                  "CIJANTUNG"            
[46] "PEKAYON"               "MALAKA JAYA"           "HALIM PERDANA KUSUMAH"
[49] "CIBUBUR"               "KELAPA DUA WETAN"      "MUNJUL"               
[52] "LUBANG BUAYA"         </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-04-30"</span>, <span class="st">"April 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in April 2022"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "PETOJO UTARA"         
 [4] "MENTENG"               "PETAMBURAN"            "KEBON MELATI"         
 [7] "CILINCING"             "KALIBARU"              "SEMPER BARAT"         
[10] "MANGGA BESAR"          "MANGGARAI SELATAN"     "PASAR MANGGIS"        
[13] "KEBAGUSAN"             "PONDOK LABU"           "LENTENG AGUNG"        
[16] "JAGAKARSA"             "CIPEDAK"               "KAMPUNG TENGAH"       
[19] "BALE KAMBANG"          "CILILITAN"             "KALISARI"             
[22] "CIRACAS"               "CIPAYUNG"              "GAMBIR"               
[25] "PETOJO SELATAN"        "GONDANGDIA"            "KEBON SIRIH"          
[28] "GELORA"                "BENDUNGAN HILIR"       "KARET TENGSIN"        
[31] "KEBON KACANG"          "KAMPUNG BALI"          "TANGKI"               
[34] "TANAH SEREAL"          "TEBET BARAT"           "TEBET TIMUR"          
[37] "CIPINANG CEMPEDAK"     "CILANDAK TIMUR"        "CIKOKO"               
[40] "SRENGSENG SAWAH"       "CIGANJUR"              "TANJUNG BARAT"        
[43] "BIDARA CINA"           "BATU AMPAR"            "BARU"                 
[46] "CIJANTUNG"             "PEKAYON"               "PONDOK BAMBU"         
[49] "HALIM PERDANA KUSUMAH" "CIBUBUR"               "KELAPA DUA WETAN"     
[52] "MUNJUL"                "LUBANG BUAYA"         </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-05-31"</span>, <span class="st">"May 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in May 2022"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "MENTENG"              
 [4] "PETAMBURAN"            "KEBON MELATI"          "LAGOA"                
 [7] "CILINCING"             "KALIBARU"              "MANGGA BESAR"         
[10] "RAWA BUNGA"            "MANGGARAI SELATAN"     "RAGUNAN"              
[13] "KEBAGUSAN"             "SENAYAN"               "PONDOK LABU"          
[16] "LENTENG AGUNG"         "JAGAKARSA"             "CIPEDAK"              
[19] "KAMPUNG TENGAH"        "BALE KAMBANG"          "KALISARI"             
[22] "PINANG RANTI"          "CIPAYUNG"              "GONDANGDIA"           
[25] "KEBON SIRIH"           "GELORA"                "BENDUNGAN HILIR"      
[28] "KEBON KACANG"          "KAMPUNG BALI"          "TANGKI"               
[31] "KAMAL"                 "TEBET BARAT"           "TEBET TIMUR"          
[34] "CIPINANG CEMPEDAK"     "CIKOKO"                "SRENGSENG SAWAH"      
[37] "CIGANJUR"              "TANJUNG BARAT"         "BATU AMPAR"           
[40] "BARU"                  "CIJANTUNG"             "PEKAYON"              
[43] "HALIM PERDANA KUSUMAH" "CIBUBUR"               "KELAPA DUA WETAN"     
[46] "MUNJUL"               </code></pre>
</div>
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_significant_locations</span>(<span class="st">"2022-06-30"</span>, <span class="st">"June 2022"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sub-Districts with p-value of Gi* &lt; 0.05 in June 2022"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "KEAGUNGAN"             "GLODOK"                "PETOJO UTARA"         
 [4] "SENEN"                 "MENTENG"               "PETAMBURAN"           
 [7] "KEBON MELATI"          "LAGOA"                 "CILINCING"            
[10] "KALIBARU"              "MANGGA BESAR"          "MANGGARAI SELATAN"    
[13] "RAGUNAN"               "PONDOK LABU"           "LENTENG AGUNG"        
[16] "JAGAKARSA"             "CIPEDAK"               "CIPINANG BESAR UTARA" 
[19] "KAMPUNG TENGAH"        "BALE KAMBANG"          "KALISARI"             
[22] "CIPAYUNG"              "GAMBIR"                "PETOJO SELATAN"       
[25] "GONDANGDIA"            "KEBON SIRIH"           "GELORA"               
[28] "BENDUNGAN HILIR"       "KARET TENGSIN"         "KEBON KACANG"         
[31] "KAMPUNG BALI"          "TANGKI"                "TANAH SEREAL"         
[34] "TEBET BARAT"           "TEBET TIMUR"           "CIPINANG CEMPEDAK"    
[37] "CILANDAK TIMUR"        "CIKOKO"                "SRENGSENG SAWAH"      
[40] "CIGANJUR"              "TANJUNG BARAT"         "BATU AMPAR"           
[43] "BARU"                  "CIJANTUNG"             "PEKAYON"              
[46] "MALAKA JAYA"           "HALIM PERDANA KUSUMAH" "CIBUBUR"              
[49] "KELAPA DUA WETAN"      "MUNJUL"               </code></pre>
</div>
</div>
<p>Below is a table that summarises the number of times the p-value of Gi* was less than 0.05 for the respective Sub-Districts in the 12 months period (this table only shows the Sub-Districts with a significant p-value for at least 1 month):</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>num_of_times <span class="ot">=</span> <span class="fu">filter</span>(combined_jakarta_gi_stars, p_sim<span class="sc">&lt;</span><span class="fl">0.05</span>)</span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(<span class="fu">table</span>(num_of_times<span class="sc">$</span>Sub_District))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                      Var1 Freq
1                    ANCOL    1
2             BALE KAMBANG   11
3              BALI MESTER    4
4                     BARU    9
5               BATU AMPAR   12
6          BENDUNGAN HILIR   10
7              BIDARA CINA    9
8      CEMPAKA PUTIH BARAT    1
9                  CIBUBUR   10
10                CIGANJUR   10
11               CIJANTUNG   10
12                  CIKINI    1
13                  CIKOKO    8
14          CILANDAK BARAT    3
15          CILANDAK TIMUR    7
16               CILILITAN    4
17               CILINCING   10
18                CIPAYUNG    6
19                 CIPEDAK   10
20  CIPINANG BESAR SELATAN    3
21    CIPINANG BESAR UTARA    8
22       CIPINANG CEMPEDAK   12
23          CIPINANG MUARA    2
24                 CIPULIR    2
25                 CIRACAS    1
26             DUREN SAWIT    1
27            DURI SELATAN    1
28                   GALUR    2
29                  GAMBIR    5
30                  GEDONG    3
31                  GELORA    7
32                  GLODOK   12
33              GONDANGDIA    7
34          GROGOL SELATAN    1
35            GROGOL UTARA    1
36   GUNUNG SAHARI SELATAN    1
37     GUNUNG SAHARI UTARA    1
38   HALIM PERDANA KUSUMAH   11
39               JAGAKARSA    9
40              JATINEGARA    1
41         JATINEGARA KAUM    1
42           JEMBATAN LIMA    1
43              JOHAR BARU    1
44                KALIBARU   10
45                KALISARI    9
46                   KAMAL    1
47             KAMAL MUARA    1
48            KAMPUNG BALI   12
49          KAMPUNG MELAYU    3
50            KAMPUNG RAWA    3
51          KAMPUNG TENGAH   12
52             KAPUK MUARA    2
53           KARET TENGSIN    4
54              KAYU MANIS    1
55               KEAGUNGAN   12
56               KEBAGUSAN    5
57            KEBON KACANG   12
58            KEBON MELATI   12
59             KEBON SIRIH    7
60              KELAPA DUA    3
61        KELAPA DUA WETAN   11
62     KELAPA GADING BARAT    2
63     KELAPA GADING TIMUR    7
64                 KLENDER    2
65                    KOJA    2
66                  KRAMAT    2
67             KRAMAT JATI    3
68                   LAGOA    9
69           LENTENG AGUNG    9
70            LUBANG BUAYA    5
71             MALAKA JAYA    4
72             MALAKA SARI    1
73            MANGGA BESAR   12
74       MANGGARAI SELATAN    8
75                  MAPHAR    3
76                 MARUNDA    1
77                 MELAWAI    2
78                 MENTENG    7
79                  MUNJUL    9
80              PAL MERIAM    1
81                PAPANGGO    1
82              PASAR BARU    2
83           PASAR MANGGIS    2
84          PEGANGSAAN DUA    3
85           PEJATEN TIMUR    3
86                 PEKAYON    8
87            PENGGILINGAN    1
88             PENJARINGAN    2
89              PETAMBURAN   12
90               PETOGOGAN    2
91          PETOJO SELATAN    7
92            PETOJO UTARA    2
93        PETUKANGAN UTARA    1
94            PINANG RANTI    1
95               PINANGSIA    3
96           PISANGAN BARU    2
97          PISANGAN TIMUR    1
98            PONDOK BAMBU    4
99             PONDOK KOPI    2
100            PONDOK LABU    9
101            PULO GADUNG    2
102                RAGUNAN    7
103               RAMBUTAN    1
104     RAWA BADAK SELATAN    1
105       RAWA BADAK UTARA    4
106             RAWA BARAT    1
107             RAWA BUNGA    9
108             ROA MALAKA    1
109                 SELONG    2
110           SEMPER BARAT    5
111           SEMPER TIMUR    4
112                SENAYAN    2
113                  SENEN    2
114              SRENGSENG    1
115        SRENGSENG SAWAH    9
116       SUKABUMI SELATAN    4
117         SUKABUMI UTARA    3
118           SUNTER AGUNG    1
119            SUNTER JAYA    4
120           TANAH SEREAL    5
121           TANAH TINGGI    2
122                 TANGKI   10
123          TANJUNG BARAT    6
124            TEBET BARAT   10
125            TEBET TIMUR   10
126                 TOMANG    1
127             TUGU UTARA    5
128                ULUJAMI    1</code></pre>
</div>
</div>
<p>Here is a gif to show how the Gi* values and their p-values change over time</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ezgif.com-gif-maker (2).gif" class="img-fluid figure-img"></p>
</figure>
</div>
<p>We can tell that from July 2021 to September 2021, the areas of significant p-values seem to be around the Northern and Central areas.</p>
<p>From October 2021 to June 2022, the North-East, Central and Southern areas seem to be the locations with significant p-values instead.</p>
</section>
<section id="statistical-conclusions" class="level3">
<h3 class="anchored" data-anchor-id="statistical-conclusions">4.6.3 Statistical conclusions</h3>
<p>For the Sub-Districts with p-value of Gi* &lt; 0.05, the Gi* values of the monthly vaccination rates of these locations are significant. The Gi* values of these locations are either significantly high (around 2 to 6) or significantly low (around -2 to -6).</p>
<p>Throughout the 12 months, there were 128 Sub-Districts with at least 1 month of having a significant Gi* value.</p>
<p>The Gi* value of the vaccination rates for all 12 months were significant for Sub-Districts “BATU AMPAR”, “CIPINANG CEMPEDAK”, “GLODOK”, “KAMPUNG BALI”, “KAMPUNG TENGAH”, “KEAGUNGAN”, “KEBON KACANG”, “KEBON MELATI”, “MANGGA BESAR”, “PETAMBURAN”. This means that the vaccination rates for 12 months for these Sub-Districts were either significantly high or low.</p>
</section>
</section>
<section id="emerging-hot-spot-analysis-ehsa" class="level2">
<h2 class="anchored" data-anchor-id="emerging-hot-spot-analysis-ehsa">4.7 Emerging Hot Spot Analysis (EHSA)</h2>
<section id="mann-kendall-test" class="level3">
<h3 class="anchored" data-anchor-id="mann-kendall-test">4.7.1 Mann-Kendall Test</h3>
<p>In this section, we will perform the Mann-Kendall Test using the spatio-temporal local Gi* values on 3 Sub-Districts.</p>
<section id="sub-district-1---halim-perdana-kusumah" class="level4">
<h4 class="anchored" data-anchor-id="sub-district-1---halim-perdana-kusumah">4.7.1.1 Sub-District 1 - “HALIM PERDANA KUSUMAH”</h4>
<p>Firstly, on Sub-District “HALIM PERDANA KUSUMAH”:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>cbg <span class="ot">&lt;-</span> gi_stars <span class="sc">|&gt;</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"HALIM PERDANA KUSUMAH"</span>) <span class="sc">|&gt;</span></span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Plotting the result using ggplot2 functions</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cbg,</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date,</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span> </span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Interactive plot using <code>ggplotly()</code> of plotly package:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> cbg,</span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date,</span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span> </span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-fa4f707f3b68aee4d57b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fa4f707f3b68aee4d57b">{"x":{"data":[{"x":[18839,18870,18900,18931,18961,18992,19023,19050,19082,19112,19143,19173],"y":[1.70753953311471,2.75728000745929,2.87326678293201,2.70160784797344,2.63109422126057,3.17099289449045,3.29164755748981,3.56688192246336,3.17467631984085,3.27172046133375,2.7883417134738,2.99537701302179],"text":["Date: 2021-07-31<br />gi_star: 1.707540","Date: 2021-08-31<br />gi_star: 2.757280","Date: 2021-09-30<br />gi_star: 2.873267","Date: 2021-10-31<br />gi_star: 2.701608","Date: 2021-11-30<br />gi_star: 2.631094","Date: 2021-12-31<br />gi_star: 3.170993","Date: 2022-01-31<br />gi_star: 3.291648","Date: 2022-02-27<br />gi_star: 3.566882","Date: 2022-03-31<br />gi_star: 3.174676","Date: 2022-04-30<br />gi_star: 3.271720","Date: 2022-05-31<br />gi_star: 2.788342","Date: 2022-06-30<br />gi_star: 2.995377"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18822.3,19189.7],"tickmode":"array","ticktext":["Okt 2021","Jan 2022","Apr 2022","Jul 2022"],"tickvals":[18901,18993,19083,19174],"categoryorder":"array","categoryarray":["Okt 2021","Jan 2022","Apr 2022","Jul 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1.61457241364728,3.6598490419308],"tickmode":"array","ticktext":["2.0","2.5","3.0","3.5"],"tickvals":[2,2.5,3,3.5],"categoryorder":"array","categoryarray":["2.0","2.5","3.0","3.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"47b424cb6e83":{"x":{},"y":{},"type":"scatter"}},"cur_data":"47b424cb6e83","visdat":{"47b424cb6e83":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>p-value of Mann Kendall Test:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>cbg <span class="sc">%&gt;%</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 5
    tau     sl     S     D  varS
  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 0.394 0.0865    26  66.0  213.</code></pre>
</div>
</div>
<p>The p-value is 0.08 which is &gt; 0.05 hence p-value is not significant. This result tells us that here is an overall upward but insignificant trend.</p>
</section>
<section id="sub-district-2---cipayung" class="level4">
<h4 class="anchored" data-anchor-id="sub-district-2---cipayung">4.7.1.2 Sub-District 2 - “CIPAYUNG”</h4>
<p>Secondly, on Sub-District “CIPAYUNG”:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>cbg <span class="ot">&lt;-</span> gi_stars <span class="sc">|&gt;</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"CIPAYUNG"</span>) <span class="sc">|&gt;</span></span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Plotting the result using ggplot2 functions</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cbg,</span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date,</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span> </span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Interactive plot using <code>ggplotly()</code> of plotly package:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> cbg,</span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date,</span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span> </span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-fdbfe9833c4ce312bf50" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fdbfe9833c4ce312bf50">{"x":{"data":[{"x":[18839,18870,18900,18931,18961,18992,19023,19050,19082,19112,19143,19173],"y":[-0.503866578715765,1.97153960780484,1.93601194624107,2.61996348484285,2.15974234703624,2.35883187707704,2.52371207609649,1.94004797727744,1.90133035503596,2.19600785269654,2.39301671292538,2.8170947585275],"text":["Date: 2021-07-31<br />gi_star: -0.5038666","Date: 2021-08-31<br />gi_star:  1.9715396","Date: 2021-09-30<br />gi_star:  1.9360119","Date: 2021-10-31<br />gi_star:  2.6199635","Date: 2021-11-30<br />gi_star:  2.1597423","Date: 2021-12-31<br />gi_star:  2.3588319","Date: 2022-01-31<br />gi_star:  2.5237121","Date: 2022-02-27<br />gi_star:  1.9400480","Date: 2022-03-31<br />gi_star:  1.9013304","Date: 2022-04-30<br />gi_star:  2.1960079","Date: 2022-05-31<br />gi_star:  2.3930167","Date: 2022-06-30<br />gi_star:  2.8170948"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":31.4155251141553},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18822.3,19189.7],"tickmode":"array","ticktext":["Okt 2021","Jan 2022","Apr 2022","Jul 2022"],"tickvals":[18901,18993,19083,19174],"categoryorder":"array","categoryarray":["Okt 2021","Jan 2022","Apr 2022","Jul 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.669914645577929,2.98314282538967],"tickmode":"array","ticktext":["0","1","2"],"tickvals":[0,1,2],"categoryorder":"array","categoryarray":["0","1","2"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"47b47a1a1a8":{"x":{},"y":{},"type":"scatter"}},"cur_data":"47b47a1a1a8","visdat":{"47b47a1a1a8":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>p-value of Mann Kendall Test:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>cbg <span class="sc">%&gt;%</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 5
    tau    sl     S     D  varS
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 0.364 0.115    24  66.0  213.</code></pre>
</div>
</div>
<p>The p-value is 0.11 which is &gt; 0.05 hence p-value is not significant. This result tells us that here is an overall steep upward but insignificant trend.</p>
</section>
<section id="sub-district-3---ancol" class="level4">
<h4 class="anchored" data-anchor-id="sub-district-3---ancol">4.7.1.3 Sub-District 3 - “ANCOL”</h4>
<p>Thirdly, on Sub-District “ANCOL”:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>cbg <span class="ot">&lt;-</span> gi_stars <span class="sc">|&gt;</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"ANCOL"</span>) <span class="sc">|&gt;</span></span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, Date, gi_star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Plotting the result using ggplot2 functions</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cbg,</span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date,</span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span> </span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Interactive plot using <code>ggplotly()</code> of plotly package:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> cbg,</span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Date,</span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span> </span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-7"><a href="#cb238-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e65ebd2ad886c081149d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e65ebd2ad886c081149d">{"x":{"data":[{"x":[18839,18870,18900,18931,18961,18992,19023,19050,19082,19112,19143,19173],"y":[2.35231993618912,2.17202663520638,0.453333460202185,-0.714777661440997,-1.02163133313795,-0.737251395329177,-0.679392251222054,-0.870337580893983,-0.471220550314699,-0.459190346155749,-0.505949284634161,-0.720143018661453],"text":["Date: 2021-07-31<br />gi_star:  2.3523199","Date: 2021-08-31<br />gi_star:  2.1720266","Date: 2021-09-30<br />gi_star:  0.4533335","Date: 2021-10-31<br />gi_star: -0.7147777","Date: 2021-11-30<br />gi_star: -1.0216313","Date: 2021-12-31<br />gi_star: -0.7372514","Date: 2022-01-31<br />gi_star: -0.6793923","Date: 2022-02-27<br />gi_star: -0.8703376","Date: 2022-03-31<br />gi_star: -0.4712206","Date: 2022-04-30<br />gi_star: -0.4591903","Date: 2022-05-31<br />gi_star: -0.5059493","Date: 2022-06-30<br />gi_star: -0.7201430"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18822.3,19189.7],"tickmode":"array","ticktext":["Okt 2021","Jan 2022","Apr 2022","Jul 2022"],"tickvals":[18901,18993,19083,19174],"categoryorder":"array","categoryarray":["Okt 2021","Jan 2022","Apr 2022","Jul 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.19032889660431,2.52101749965547],"tickmode":"array","ticktext":["-1","0","1","2"],"tickvals":[-1,0,1,2],"categoryorder":"array","categoryarray":["-1","0","1","2"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"47b445966537":{"x":{},"y":{},"type":"scatter"}},"cur_data":"47b445966537","visdat":{"47b445966537":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>p-value of Mann Kendall Test:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>cbg <span class="sc">%&gt;%</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span> </span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 5
     tau    sl     S     D  varS
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 -0.273 0.244   -18  66.0  213.</code></pre>
</div>
</div>
<p>The p-value is 0.24 which is &gt; 0.05 hence p-value is not significant. This result tells us that here is an overall steep downward but insignificant trend.</p>
</section>
</section>
<section id="ehsa-map-of-the-gi-values-of-the-vaccination-rate" class="level3">
<h3 class="anchored" data-anchor-id="ehsa-map-of-the-gi-values-of-the-vaccination-rate">4.7.2 EHSA map of the Gi* values of the vaccination rate</h3>
<p>To find out the significant emerging hot/cold spots, we would need to perform the Mann Kendall Test for each location. We can use <code>group_by()</code> of dplyr package:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a>ehsa <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Sub_District) <span class="sc">%&gt;%</span></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mk =</span> <span class="fu">list</span>(</span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unclass</span>(</span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a>      Kendall<span class="sc">::</span><span class="fu">MannKendall</span>(gi_star)))) <span class="sc">%&gt;%</span></span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest_wider</span>(mk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Arrange to show significant emerging hot/cold spots:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>emerging <span class="ot">&lt;-</span> ehsa <span class="sc">%&gt;%</span> </span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(sl, <span class="fu">abs</span>(tau)) <span class="sc">%&gt;%</span> </span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>emerging</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 x 6
  Sub_District       tau        sl     S     D  varS
  &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 PETOJO UTARA    -0.970 0.0000156   -64  66.0  213.
2 KAYU MANIS       0.970 0.0000156    64  66.0  213.
3 JATINEGARA KAUM  0.939 0.0000287    62  66.0  213.
4 PISANGAN BARU    0.939 0.0000287    62  66.0  213.
5 PASAR BARU      -0.939 0.0000288   -62  66.0  213.</code></pre>
</div>
</div>
<p>Performing Emerging Hotspot Analysis using <code>emerging_hotspot_analysis()</code> of sfdep package:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>ehsa <span class="ot">&lt;-</span> <span class="fu">emerging_hotspot_analysis</span>(</span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> vacc_rate_st,</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">.var =</span> <span class="st">"Vaccination_Rate"</span>,</span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">1</span>,</span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">nsim =</span> <span class="dv">99</span></span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Notes:</p>
<ul>
<li>It takes a spacetime object x (i.e.&nbsp;varr_rate_st)</li>
<li>and the quoted name of the variable of interest (i.e.&nbsp;Vaccination_Rate) for .var argument</li>
<li>k argument is used to specify the number of time lags which is set to 1 by default</li>
<li>nsim map numbers of simulation to be performed</li>
</ul>
<p>Visualisation of the distribution of EHSA classes using ggplot2 functions:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ehsa,</span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>classification, <span class="at">fill=</span>classification)) <span class="sc">+</span> </span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The figure shows that the oscillating hot spot class has the highest number of Sub-Districts.</p>
<p>Before we can visualise the geographic distribution of the EHSA classes, we need to join <code>combined_jakarta</code> and <code>ehsa</code> together:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>combined_jakarta_ehsa <span class="ot">&lt;-</span> combined_jakarta <span class="sc">%&gt;%</span></span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ehsa, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Sub_District"</span> <span class="ot">=</span> <span class="st">"location"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, we can plot a categorical choropleth map for the significant locations using tmap functions:</p>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this adds a new column "NewClassification" so that we can include a class called "insignificant" in our plot</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a>combined_jakarta_ehsa <span class="ot">&lt;-</span> combined_jakarta_ehsa <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">NewClassification =</span> </span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>                                                            <span class="fu">case_when</span>(p_value <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">~</span> classification,</span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a>                                                                      p_value <span class="sc">&gt;=</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"insignificant"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code!</summary>
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(combined_jakarta_ehsa) <span class="sc">+</span></span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb248-4"><a href="#cb248-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb248-5"><a href="#cb248-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(combined_jakarta_ehsa) <span class="sc">+</span></span>
<span id="cb248-6"><a href="#cb248-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"NewClassification"</span>,</span>
<span id="cb248-7"><a href="#cb248-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#ffffff"</span>, <span class="st">"#2c7bb6"</span>, <span class="st">"#abd9e9"</span>, <span class="st">"#fdae61"</span>, <span class="st">"#d7191c"</span>)) <span class="sc">+</span> </span>
<span id="cb248-8"><a href="#cb248-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex02_files/figure-html/unnamed-chunk-98-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="observations-of-the-spatial-patterns" class="level4">
<h4 class="anchored" data-anchor-id="observations-of-the-spatial-patterns">4.7.2.1 Observations of the spatial patterns</h4>
<p>Among the significant places, the number of locations being classified as oscillating hotspot is the greatest, followed by sporadic coldspot, oscillating coldspot, and no pattern detected.</p>
<p>The oscillating hotspots are spread out almost evenly in the whole of Jakarta since there are so many of them.</p>
<p>The sporadic coldspots are spread out slightly less evenly than the oscillating hotspots since the borders are not covered as much and they seem to be mainly at the Central area.</p>
<p>The oscillating coldspots seem to be spread quite evenly, around the Southern, Western and Central area. They seem to be less obvious at the Northern borders.</p>
<p>Lastly, the locations where no patterns are detected seem to be mainly in the Central area with the rest of the locations at different parts of Jakarta.</p>
<p>The areas where the patterns are insignificant appears to be mostly at the Central area and a little at the Western and Southern area.</p>
</section>
</section>
</section>
</section>
<section id="references" class="level1">
<h1>5 References</h1>
<p>Thank you to Prof Kam for the course teachings and reference materials!</p>
<p>Thank you to Senior Megan Sim for the reference - <a href="https://is415-msty.netlify.app/posts/2021-09-10-take-home-exercise-1/">Take Home Exercise 1</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>